@model Model.EF.ProcessRequest
@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_Theme3.cshtml";
    var check1 = (Model.Approve1);
    var check2 = (Model.Approve2);
    List<Model.EF.Processing_EN> ListEP = ViewBag.EP;
    List<Model.EF.Processing_XI> ListXI = ViewBag.XI;
    List<Model.EF.Processing_SN> ListSN = ViewBag.SN;
    List<Model.EF.WorkCenter> ListWorkCenterEP = ViewBag.WorkCenterEP;
    List<Model.EF.WorkCenter> ListWorkCenterXI = ViewBag.WorkCenterXI;
    List<Model.EF.WorkCenter> ListWorkCenterSN = ViewBag.WorkCenterSN;
    var WorkCenterEP = new List<SelectListItem>();
    var WorkCenterXI = new List<SelectListItem>();
    var WorkCenterSN = new List<SelectListItem>();
    WorkCenterEP.Add(new SelectListItem
    {
        Value = "",
        Text = "Chọn Workcenter",
    });
    foreach (var item in ListWorkCenterEP)
    {
        WorkCenterEP.Add(new SelectListItem
        {
            Text = item.Name,
            Value = item.Name,
        });
    }
    WorkCenterXI.Add(new SelectListItem
    {
        Value = "",
        Text = "Chọn Workcenter",
    });
    foreach (var item in ListWorkCenterXI)
    {
        WorkCenterXI.Add(new SelectListItem
        {
            Text = item.Name,
            Value = item.Name,
        });
    }
    WorkCenterSN.Add(new SelectListItem
    {
        Value = "",
        Text = "Chọn Workcenter",
    });
    foreach (var item in ListWorkCenterSN)
    {
        WorkCenterSN.Add(new SelectListItem
        {
            Text = item.Name,
            Value = item.Name,
        });
    }

}
@section jsFooter
{
    <script src="/Assets/plugin/ckfinder/ckfinder.js"></script>
    <script src="~/Scripts/ProcessRequest.js"></script>
    <script>
        $(".date").datepicker();
        $('.select2').select2()
    </script>

}
<script src="~/Scripts/jquery-3.4.1.min.js"></script>
<link href="~/Assets/js/jquery-ui.css" rel="stylesheet" />
<style type="text/css">
    .radio-inputs {
        position: relative;
        display: flex;
        flex-wrap: wrap;
        border-radius: 0.5rem;
        background-color: transparent;
        box-sizing: border-box;
        box-shadow: 0 0 0px 1px rgba(0, 0, 0, 0.06);
        padding: 0.25rem;
        width: 300px;
        font-size: 14px;
    }

        .radio-inputs .radio {
            flex: 1 1 auto;
            text-align: center;
        }

            .radio-inputs .radio input {
                display: none;
            }

            .radio-inputs .radio .name {
                display: flex;
                cursor: pointer;
                align-items: center;
                justify-content: center;
                border-radius: 0.5rem;
                border: none;
                padding: .5rem 0;
                color: rgba(51, 65, 85, 1);
                transition: all .15s ease-in-out;
            }

            .radio-inputs .radio input:checked + .name {
                background-color: #cce144;
                font-weight: 600;
            }
</style>
<div class="card card-primary">
    <div class="card-header">
        <h3 class="card-title">Tạo Phiếu yêu cầu gia công</h3>
    </div>

    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
    <div class="card-body">
        <div class="row">
            <div class="col-md-12">
                <div class="row" style="background: #f6fcfd; padding-bottom: 15px;">

                    <div class="col-md-9">
                        <div class="form-group">
                            <label class="control-label col-md-12">Item</label>
                            <input class="form-control" value="@Model.Item: @Model.ItemName" readonly />
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="control-label col-md-12">Loại</label>
                            @if (Model.Type == 0)
                            {
                                <input class="form-control" value="Sản phẩm mới" readonly />
                            }
                            else
                            {
                                <input class="form-control" value="Cải tiến" readonly />
                            }
                        </div>
                    </div>
                    <div class="col-md-8">
                        <div class="form-group">
                            <label class="control-label col-md-12">Tên Phiếu</label>
                            @Html.TextBoxFor(model => model.Name, new { @ID = "Name", @class = "form-control", @required = "required", @readonly = true })
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group">
                            <label class="control-label col-md-12">Khách hàng</label>
                            <input class="form-control" value="@Model.CustomerID: @Model.CustomerName" readonly />
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group">
                            <label class="control-label col-md-12">Người đại diện</label>
                            <input class="form-control" value="@Model.deputy" readonly />
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="form-group">
                            <label class="control-label col-md-12">Ghi chú</label>
                            @Html.TextAreaFor(model => model.Note, new { @ID = "Note", @class = "form-control", @rows = 2, @readonly = true })
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-12">
                <div class="row">
                    @if (!Model.Approve1 || !Model.Approve2)
                    {

                        <div class="table-responsive">
                            @using (Html.BeginForm("RDQCApprove", "ProcessRequest", FormMethod.Post))
                            {
                                <input name="ID" value="@Model.ID" style="display:none" />
                                <table class="table table-striped table-bordered table-hover">
                                    <thead style="text-align:center">
                                        <tr>
                                            <th style="width: 10%;"></th>
                                            <th>KHUÔN</th>
                                            <th>ÉP</th>
                                            <th>XI</th>
                                            <th>SƠN</th>
                                            <th>lẮP RÁP</th>
                                        </tr>
                                    </thead>
                                    <tbody style="text-align:center">
                                        <tr id="row_0">
                                            <td><strong>Phương thức <br /> sản xuất</strong></td>
                                            <td>@Html.CheckBoxFor(model => model.KH, new { @style = "height:40px; width:40px;" })</td>
                                            <td>@Html.CheckBoxFor(model => model.EP, new { @style = "height:40px; width:40px;" })</td>
                                            <td>@Html.CheckBoxFor(model => model.XI, new { @style = "height:40px; width:40px;" })</td>
                                            <td>@Html.CheckBoxFor(model => model.SN, new { @style = "height:40px; width:40px;" })</td>
                                            <td>@Html.CheckBoxFor(model => model.LR, new { @style = "height:40px; width:40px;" })</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <div class="row">
                                    <div class="col-md-6" style="text-align:center">
                                        <label>R&D duyệt</label><br />
                                        @Html.CheckBoxFor(model => model.Approve1, new { @style = "height:60px; width:60px;" })
                                    </div>
                                    <div class="col-md-6" style="text-align:center">
                                        <label>QC duyệt</label><br />
                                        @Html.CheckBoxFor(model => model.Approve2, new { @style = "height:60px; width:60px;" })
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="col-md-12" style="text-align:center">
                                        <button type="submit" value="Duyệt" class="btn btn-primary">Duyệt</button>
                                    </div>
                                </div>
                            }
                        </div>
                    }
                    else
                    {
                        <div class="table-responsive">
                            <table class="table table-striped table-bordered table-hover">
                                <thead style="text-align:center">
                                    <tr>
                                        <th style="width: 10%;"></th>
                                        <th>KHUÔN</th>
                                        <th>ÉP</th>
                                        <th>XI</th>
                                        <th>SƠN</th>
                                        <th>lẮP RÁP</th>
                                    </tr>
                                </thead>
                                <tbody style="text-align:center">
                                    <tr id="row_0">
                                        <td><strong>Phương thức <br /> sản xuất</strong></td>
                                        <td>@Html.CheckBoxFor(model => model.KH, new { @style = "height:40px; width:40px;", @onclick = "return false" })</td>
                                        <td>@Html.CheckBoxFor(model => model.EP, new { @style = "height:40px; width:40px;", @onclick = "return false" })</td>
                                        <td>@Html.CheckBoxFor(model => model.XI, new { @style = "height:40px; width:40px;", @onclick = "return false" })</td>
                                        <td>@Html.CheckBoxFor(model => model.SN, new { @style = "height:40px; width:40px;", @onclick = "return false" })</td>
                                        <td>@Html.CheckBoxFor(model => model.LR, new { @style = "height:40px; width:40px;", @onclick = "return false" })</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        @Html.CheckBoxFor(model => model.Approve1, new { @style = "display: none;height:60px; width:60px;" })
                        @Html.CheckBoxFor(model => model.Approve2, new { @style = "display: none;height:60px; width:60px;" })
                        if (Model.KH)
                        {
                            Model.EF.Processing_EN EP01 = ListEP.Where(x => x.Type.Value == 1).FirstOrDefault();
                            Model.EF.Processing_EN EP02 = ListEP.Where(x => x.Type.Value == 2).FirstOrDefault();
                            Model.EF.Processing_EN EP03 = ListEP.Where(x => x.Type.Value == 3).FirstOrDefault();
                            <div class="row">
                                <div class="col-md-12" style="text-align:center">
                                    <strong style="font-size:30px">Khuôn</strong>
                                </div>
                                <div class="col-md-12">
                                    <div class="row">
                                        @*Thiết kế*@
                                        <div class="col-md-4" style="padding: 10px; background: #c7e3ce;" id="EN01">
                                            @using (Html.BeginForm("EP01", "ProcessRequest", FormMethod.Post))
                                            {
                                                <div class="row">
                                                    <div class="col-md-12" style="text-align:center">
                                                        <label style="float:unset"><strong>Thiết kế</strong></label>
                                                        <button class="btn btn-success" style="background-color: cornflowerblue;float:right" onclick="CheckCreate('EP01')"><i class="fa fa-save"></i></button>
                                                    </div>
                                                    <input name="IDRequest" value="@Model.ID" style="display:none" />
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Ngày SX</span>
                                                        <div class="bootstrap-timepicker">
                                                            <div class="form-group">
                                                                <div class="input-group">
                                                                    <input type="text" id="dateEP01" name="Date" class="form-control date" readonly="readonly" value="@(EP01 != null ? EP01.Date.Value.ToShortDateString() : "")"><br>
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Máy ép</span><br />
                                                        <select class="form-control select2" name="Machine" id="MachineEP01">
                                                            @foreach (var item in WorkCenterEP)
                                                            {
                                                                try
                                                                {
                                                                    if (item.Value == EP01.Machine)
                                                                    {
                                                                        <option value="@item.Value" selected>@item.Text</option>
                                                                    }
                                                                    else
                                                                    {
                                                                        <option value="@item.Value">@item.Text</option>
                                                                    }
                                                                }
                                                                catch
                                                                {
                                                                    <option value="@item.Value">@item.Text</option>
                                                                }
                                                            }
                                                        </select>
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>SL mẫu</span>
                                                        <input type="number" name="Amount" class="form-control" required value="@(EP01 != null ? EP01.Amount.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Thông số Ép</span>
                                                        <input type="text" name="Parameter" class="form-control" value="@(EP01 != null ? EP01.Parameter : "")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>NVL</span>
                                                        <input type="text" name="Items" class="form-control" value="@(EP01 != null ? EP01.Items : "")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Chu kỳ (s)</span>
                                                        <input type="number" name="Cycle" class="form-control" value="@(EP01 != null ? EP01.Cycle.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-12">
                                                        <span>Nội dung thay đổi</span>
                                                        <textarea rows="1" name="Description" class="form-control">@(EP01 != null ? EP01.Description : "")</textarea>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <label>NVL</label><br />
                                                        <input type="checkbox" style="transform:scale(2);" id="DSChangeItem" name="DSChangeItem" value="true" @(EP01 != null ? (EP01.DSChangeItem.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-3">
                                                        <label>Máy móc</label><br />
                                                        <input type="checkbox" style=" transform:scale(2);" id="DSChangeMachine" name="DSChangeMachine" value="true" @(EP01 != null ? (EP01.DSChangeMachine.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-3">
                                                        <label>Phương pháp</label><br />
                                                        <input type="checkbox" style=" transform:scale(2);" id="DSChangeMethod" name="DSChangeMethod" value="true" @(EP01 != null ? (EP01.DSChangeMethod.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-3">
                                                        <label>Khác</label><br />
                                                        <input type="checkbox" style=" transform:scale(2);" id="DSChangeOrder" name="DSChangeOrder" value="true" @(EP01 != null ? (EP01.DSChangeOrder.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-6">
                                                        <span>BOM</span>
                                                        <input rows="1" name="DSBOM" class="form-control" value="@(EP01 != null ? EP01.DSBOM : "")" />
                                                    </div>
                                                    <div class="col-md-6">
                                                        <span>Tiêu chuẩn thành công</span>
                                                        <input rows="1" name="DSSuccessCriteria" class="form-control" value="@(EP01 != null ? EP01.DSSuccessCriteria : "")" />
                                                    </div>
                                                    <div class="col-md-12">
                                                        <span>Ghi chú</span>
                                                        <textarea rows="2" class="form-control" name="Note">@(EP01 != null ? EP01.Note : "")</textarea>
                                                    </div>
                                                </div>
                                            }
                                        </div>
                                        @*SX*@
                                        <div class="col-md-4" style="padding: 10px; background: #b2ccbc ">
                                            @using (Html.BeginForm("EP02", "ProcessRequest", FormMethod.Post))
                                            {
                                                <div class="row">
                                                    <div class="col-md-12" style="text-align:center">
                                                        <strong>SX</strong>
                                                        <button class="btn btn-success" style="background-color: cornflowerblue;float:right" onclick="CheckCreate('EP02')"><i class="fa fa-save"></i></button>
                                                    </div>
                                                    <input name="IDRequest" value="@Model.ID" style="display:none" />
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Ngày SX</span>
                                                        <div class="bootstrap-timepicker">
                                                            <div class="form-group">
                                                                <div class="input-group">
                                                                    <input type="text" name="Date" id="dateEP02" class="form-control date" readonly="readonly" value="@(EP02 != null ? EP02.Date.Value.ToShortDateString() : "")"><br>
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Máy ép</span><br />
                                                        <select class="form-control select2" name="Machine" id="MachineEP02">
                                                            @foreach (var item in WorkCenterEP)
                                                            {
                                                                try
                                                                {
                                                                    if (item.Value == EP02.Machine)
                                                                    {
                                                                        <option value="@item.Value" selected>@item.Text</option>
                                                                    }
                                                                    else
                                                                    {
                                                                        <option value="@item.Value">@item.Text</option>
                                                                    }
                                                                }
                                                                catch
                                                                {
                                                                    <option value="@item.Value">@item.Text</option>
                                                                }
                                                            }
                                                        </select>
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>SL mẫu</span>
                                                        <input type="number" name="Amount" class="form-control" required value="@(EP02 != null ? EP02.Amount.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Thông số Ép</span>
                                                        <input type="text" name="Parameter" class="form-control" value="@(EP02 != null ? EP02.Parameter : "")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>NVL</span>
                                                        <input type="text" name="Items" class="form-control" value="@(EP02 != null ? EP02.Items : "")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Chu kỳ (s)</span>
                                                        <input type="number" name="Cycle" class="form-control" required value="@(EP02 != null ? EP02.Cycle.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-12">
                                                        <span>Nội dung thay đổi</span>
                                                        <textarea rows="1" name="Description" class="form-control">@(EP02 != null ? EP02.Description : "")</textarea>
                                                    </div>
                                                    <div class="col-md-12" style=" padding:5px">
                                                        <span>Thực tế</span>
                                                        <input type="text" name="ActualPrduction" class="form-control" value="@(EP02 != null ? EP02.ActualPrduction : "")" />
                                                    </div>
                                                    <div class="col-md-12">
                                                        <span>Ghi chú</span>
                                                        <textarea rows="2" class="form-control" name="Note">@(EP02 != null ? EP02.Note : "")</textarea>
                                                    </div>
                                                </div>}
                                        </div>
                                        @*QA/QC*@
                                        <div class="col-md-4" style="padding: 10px; background: #899e87 ">
                                            @using (Html.BeginForm("EP03", "ProcessRequest", FormMethod.Post))
                                            {
                                                <div class="row">
                                                    <div class="col-md-12" style="text-align:center">
                                                        <strong>QA/QC</strong>
                                                        <button class="btn btn-success" style="background-color: cornflowerblue;float:right" onclick="CheckCreate('EP03')"><i class="fa fa-save"></i></button>
                                                    </div>
                                                    <input name="IDRequest" value="@Model.ID" style="display:none" />
                                                    <div class="col-md-3" style=" padding:5px">
                                                        <span>Ngày SX</span>
                                                        <div class="bootstrap-timepicker">
                                                            <div class="form-group">
                                                                <div class="input-group">
                                                                    <input type="text" name="Date" class="form-control date" id="dateEP03" readonly="readonly" value="@(EP03 != null ? EP03.Date.Value.ToShortDateString() : "")"><br>
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3" style=" padding:5px">
                                                        <span>SL kiểm tra</span>
                                                        <input type="number" name="Amount" class="form-control" required value="@(EP03 != null ? EP03.Amount.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-3" style=" padding:5px">
                                                        <span>SL OK</span>
                                                        <input type="number" name="QCAmountOK" class="form-control" required value="@(EP03 != null ? EP03.QCAmountOK.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-3" style=" padding:5px">
                                                        <span>SL NG</span>
                                                        <input type="number" name="QCAmountNG" class="form-control" required value="@(EP03 != null ? EP03.QCAmountNG.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-6" style="text-align:center">
                                                        <span style="margin-right:8px">Kích thước</span>
                                                        <input type="checkbox" style="transform:scale(2);" id="QCSize" name="QCSize" value="true" @(EP03 != null ? (EP03.QCSize.Value ? "checked" : "") : "") />

                                                    </div>
                                                    <div class="col-md-6">
                                                        <input class="form-control" type="file" value="@(EP03 != null ? EP03.QCSizeFile : "")" name="QCSizeFile" />
                                                    </div>
                                                    <br />
                                                    <div class="col-md-6" style="text-align:center">
                                                        <span style="margin-right:8px">Chức năng</span>
                                                        <input type="checkbox" style="transform:scale(2);" id="QCSize" name="QCFunction" value="true" @(EP03 != null ? (EP03.QCFunction.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-6">
                                                        <input class="form-control" type="file" value="@(EP03 != null ? EP03.QCFunctionFile : "")" name="QCFunctionFile" />
                                                    </div>
                                                    <br />
                                                    <div class="col-md-6" style="text-align:center">
                                                        <span style="margin-right:8px">Ngoại quan</span>
                                                        <input type="checkbox" style="transform:scale(2);" id="QCSize" name="QCExternal" value="true" @(EP03 != null ? (EP03.QCExternal.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-6">
                                                        <input class="form-control" type="file" value="@(EP03 != null ? EP03.QCExternalFile : "")" name="QCExternalFile" />
                                                    </div>
                                                    <br />
                                                    <div class="col-md-12">
                                                        <span>Ghi chú</span>
                                                        <textarea rows="2" class="form-control" name="Note">@(EP03 != null ? EP03.Note : "")</textarea>
                                                    </div>
                                                    <div class="col-md-12" style="text-align:center">
                                                        <span>Xác nhận hoàn thành công đoạn</span><br />
                                                        <input type="checkbox" style="height:60px; width:60px;" id="Status" name="Status" value="true" @(EP03 != null ? (EP03.Status.Value ? "checked" : "") : "") />
                                                    </div>
                                                </div>}
                                        </div>
                                    </div>

                                </div>
                            </div>
                        }
                        if (Model.EP)
                        {
                            Model.EF.Processing_EN EP01 = ListEP.Where(x => x.Type.Value == 1).FirstOrDefault();
                            Model.EF.Processing_EN EP02 = ListEP.Where(x => x.Type.Value == 2).FirstOrDefault();
                            Model.EF.Processing_EN EP03 = ListEP.Where(x => x.Type.Value == 3).FirstOrDefault();
                            <div class="row">
                                <div class="col-md-12" style="text-align:center">
                                    <strong style="font-size:30px">Ép nhựa</strong>
                                </div>
                                <div class="col-md-12">
                                    <div class="row">
                                        @*Thiết kế*@
                                        <div class="col-md-4" style="padding: 10px; background: #c7e3ce;" id="EN01">
                                            @using (Html.BeginForm("EP01", "ProcessRequest", FormMethod.Post))
                                            {
                                                <div class="row">
                                                    <div class="col-md-12" style="text-align:center">
                                                        <label style="float:unset"><strong>Thiết kế</strong></label>
                                                        <button class="btn btn-success" style="background-color: cornflowerblue;float:right" onclick="CheckCreate('EP01')"><i class="fa fa-save"></i></button>
                                                    </div>
                                                    <input name="IDRequest" value="@Model.ID" style="display:none" />
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Ngày SX</span>
                                                        <div class="bootstrap-timepicker">
                                                            <div class="form-group">
                                                                <div class="input-group">
                                                                    <input type="text" id="dateEP01" name="Date" class="form-control date" readonly="readonly" value="@(EP01 != null ? EP01.Date.Value.ToShortDateString() : "")"><br>
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Máy ép</span><br />
                                                        <select class="form-control select2" name="Machine" id="MachineEP01">
                                                            @foreach (var item in WorkCenterEP)
                                                            {
                                                                try
                                                                {
                                                                    if (item.Value == EP01.Machine)
                                                                    {
                                                                        <option value="@item.Value" selected>@item.Text</option>
                                                                    }
                                                                    else
                                                                    {
                                                                        <option value="@item.Value">@item.Text</option>
                                                                    }
                                                                }
                                                                catch
                                                                {
                                                                    <option value="@item.Value">@item.Text</option>
                                                                }
                                                            }
                                                        </select>
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>SL mẫu</span>
                                                        <input type="number" name="Amount" class="form-control" required value="@(EP01 != null ? EP01.Amount.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Thông số Ép</span>
                                                        <input type="text" name="Parameter" class="form-control" value="@(EP01 != null ? EP01.Parameter : "")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>NVL</span>
                                                        <input type="text" name="Items" class="form-control" value="@(EP01 != null ? EP01.Items : "")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Chu kỳ (s)</span>
                                                        <input type="number" name="Cycle" class="form-control" value="@(EP01 != null ? EP01.Cycle.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-12">
                                                        <span>Nội dung thay đổi</span>
                                                        <textarea rows="1" name="Description" class="form-control">@(EP01 != null ? EP01.Description : "")</textarea>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <label>NVL</label><br />
                                                        <input type="checkbox" style="transform:scale(2);" id="DSChangeItem" name="DSChangeItem" value="true" @(EP01 != null ? (EP01.DSChangeItem.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-3">
                                                        <label>Máy móc</label><br />
                                                        <input type="checkbox" style=" transform:scale(2);" id="DSChangeMachine" name="DSChangeMachine" value="true" @(EP01 != null ? (EP01.DSChangeMachine.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-3">
                                                        <label>Phương pháp</label><br />
                                                        <input type="checkbox" style=" transform:scale(2);" id="DSChangeMethod" name="DSChangeMethod" value="true" @(EP01 != null ? (EP01.DSChangeMethod.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-3">
                                                        <label>Khác</label><br />
                                                        <input type="checkbox" style=" transform:scale(2);" id="DSChangeOrder" name="DSChangeOrder" value="true" @(EP01 != null ? (EP01.DSChangeOrder.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-6">
                                                        <span>BOM</span>
                                                        <input rows="1" name="DSBOM" class="form-control" value="@(EP01 != null ? EP01.DSBOM : "")" />
                                                    </div>
                                                    <div class="col-md-6">
                                                        <span>Tiêu chuẩn thành công</span>
                                                        <input rows="1" name="DSSuccessCriteria" class="form-control" value="@(EP01 != null ? EP01.DSSuccessCriteria : "")" />
                                                    </div>
                                                    <div class="col-md-12">
                                                        <span>Ghi chú</span>
                                                        <textarea rows="2" class="form-control" name="Note">@(EP01 != null ? EP01.Note : "")</textarea>
                                                    </div>
                                                </div>
                                            }
                                        </div>
                                        @*SX*@
                                        <div class="col-md-4" style="padding: 10px; background: #b2ccbc ">
                                            @using (Html.BeginForm("EP02", "ProcessRequest", FormMethod.Post))
                                            {
                                                <div class="row">
                                                    <div class="col-md-12" style="text-align:center">
                                                        <strong>SX</strong>
                                                        <button class="btn btn-success" style="background-color: cornflowerblue;float:right" onclick="CheckCreate('EP02')"><i class="fa fa-save"></i></button>
                                                    </div>
                                                    <input name="IDRequest" value="@Model.ID" style="display:none" />
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Ngày SX</span>
                                                        <div class="bootstrap-timepicker">
                                                            <div class="form-group">
                                                                <div class="input-group">
                                                                    <input type="text" name="Date" id="dateEP02" class="form-control date" readonly="readonly" value="@(EP02 != null ? EP02.Date.Value.ToShortDateString() : "")"><br>
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Máy ép</span><br />
                                                        <select class="form-control select2" name="Machine" id="MachineEP02">
                                                            @foreach (var item in WorkCenterEP)
                                                            {
                                                                try
                                                                {
                                                                    if (item.Value == EP02.Machine)
                                                                    {
                                                                        <option value="@item.Value" selected>@item.Text</option>
                                                                    }
                                                                    else
                                                                    {
                                                                        <option value="@item.Value">@item.Text</option>
                                                                    }
                                                                }
                                                                catch
                                                                {
                                                                    <option value="@item.Value">@item.Text</option>
                                                                }
                                                            }
                                                        </select>
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>SL mẫu</span>
                                                        <input type="number" name="Amount" class="form-control" required value="@(EP02 != null ? EP02.Amount.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Thông số Ép</span>
                                                        <input type="text" name="Parameter" class="form-control" value="@(EP02 != null ? EP02.Parameter : "")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>NVL</span>
                                                        <input type="text" name="Items" class="form-control" value="@(EP02 != null ? EP02.Items : "")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Chu kỳ (s)</span>
                                                        <input type="number" name="Cycle" class="form-control" required value="@(EP02 != null ? EP02.Cycle.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-12">
                                                        <span>Nội dung thay đổi</span>
                                                        <textarea rows="1" name="Description" class="form-control">@(EP02 != null ? EP02.Description : "")</textarea>
                                                    </div>
                                                    <div class="col-md-12" style=" padding:5px">
                                                        <span>Thực tế</span>
                                                        <input type="text" name="ActualPrduction" class="form-control" value="@(EP02 != null ? EP02.ActualPrduction : "")" />
                                                    </div>
                                                    <div class="col-md-12">
                                                        <span>Ghi chú</span>
                                                        <textarea rows="2" class="form-control" name="Note">@(EP02 != null ? EP02.Note : "")</textarea>
                                                    </div>
                                                </div>}
                                        </div>
                                        @*QA/QC*@
                                        <div class="col-md-4" style="padding: 10px; background: #899e87 ">
                                            @using (Html.BeginForm("EP03", "ProcessRequest", FormMethod.Post))
                                            {
                                                <div class="row">
                                                    <div class="col-md-12" style="text-align:center">
                                                        <strong>QA/QC</strong>
                                                        <button class="btn btn-success" style="background-color: cornflowerblue;float:right" onclick="CheckCreate('EP03')"><i class="fa fa-save"></i></button>
                                                    </div>
                                                    <input name="IDRequest" value="@Model.ID" style="display:none" />
                                                    <div class="col-md-3" style=" padding:5px">
                                                        <span>Ngày SX</span>
                                                        <div class="bootstrap-timepicker">
                                                            <div class="form-group">
                                                                <div class="input-group">
                                                                    <input type="text" name="Date" class="form-control date" id="dateEP03" readonly="readonly" value="@(EP03 != null ? EP03.Date.Value.ToShortDateString() : "")"><br>
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3" style=" padding:5px">
                                                        <span>SL kiểm tra</span>
                                                        <input type="number" name="Amount" class="form-control" required value="@(EP03 != null ? EP03.Amount.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-3" style=" padding:5px">
                                                        <span>SL OK</span>
                                                        <input type="number" name="QCAmountOK" class="form-control" required value="@(EP03 != null ? EP03.QCAmountOK.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-3" style=" padding:5px">
                                                        <span>SL NG</span>
                                                        <input type="number" name="QCAmountNG" class="form-control" required value="@(EP03 != null ? EP03.QCAmountNG.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-6" style="text-align:center">
                                                        <span style="margin-right:8px">Kích thước</span>
                                                        <input type="checkbox" style="transform:scale(2);" id="QCSize" name="QCSize" value="true" @(EP03 != null ? (EP03.QCSize.Value ? "checked" : "") : "") />

                                                    </div>
                                                    <div class="col-md-6">
                                                        <input class="form-control" type="file" value="@(EP03 != null ? EP03.QCSizeFile : "")" name="QCSizeFile" />
                                                    </div>
                                                    <br />
                                                    <div class="col-md-6" style="text-align:center">
                                                        <span style="margin-right:8px">Chức năng</span>
                                                        <input type="checkbox" style="transform:scale(2);" id="QCSize" name="QCFunction" value="true" @(EP03 != null ? (EP03.QCFunction.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-6">
                                                        <input class="form-control" type="file" value="@(EP03 != null ? EP03.QCFunctionFile : "")" name="QCFunctionFile" />
                                                    </div>
                                                    <br />
                                                    <div class="col-md-6" style="text-align:center">
                                                        <span style="margin-right:8px">Ngoại quan</span>
                                                        <input type="checkbox" style="transform:scale(2);" id="QCSize" name="QCExternal" value="true" @(EP03 != null ? (EP03.QCExternal.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-6">
                                                        <input class="form-control" type="file" value="@(EP03 != null ? EP03.QCExternalFile : "")" name="QCExternalFile" />
                                                    </div>
                                                    <br />
                                                    <div class="col-md-12">
                                                        <span>Ghi chú</span>
                                                        <textarea rows="2" class="form-control" name="Note">@(EP03 != null ? EP03.Note : "")</textarea>
                                                    </div>
                                                    <div class="col-md-12" style="text-align:center">
                                                        <span>Xác nhận hoàn thành công đoạn</span><br />
                                                        <input type="checkbox" style="height:60px; width:60px;" id="Status" name="Status" value="true" @(EP03 != null ? (EP03.Status.Value ? "checked" : "") : "") />
                                                    </div>
                                                </div>}
                                        </div>
                                    </div>

                                </div>
                            </div>
                        }
                        if (Model.XI)
                        {
                            Model.EF.Processing_XI XI01 = ListXI.Where(x => x.Type.Value == 1).FirstOrDefault();
                            Model.EF.Processing_XI XI02 = ListXI.Where(x => x.Type.Value == 2).FirstOrDefault();
                            Model.EF.Processing_XI XI03 = ListXI.Where(x => x.Type.Value == 3).FirstOrDefault();
                            <div class="row">
                                <div class="col-md-12" style="text-align:center">
                                    <strong style="font-size:30px">XI</strong>
                                </div>
                                <div class="col-md-12">
                                    <div class="row">
                                        @*Thiết kế*@
                                        <div class="col-md-4" style="padding: 10px; background: #c7e3ce;" id="EN01">
                                            @using (Html.BeginForm("XI01", "ProcessRequest", FormMethod.Post))
                                            {
                                                <div class="row">
                                                    <div class="col-md-12" style="text-align:center">
                                                        <label style="float:unset"><strong>Thiết kế</strong></label>
                                                        <button class="btn btn-success" style="background-color: cornflowerblue;float:right" onclick="CheckCreateLine('XI01')"><i class="fa fa-save"></i></button>
                                                    </div>
                                                    <input name="IDRequest" value="@Model.ID" style="display:none" />
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Ngày SX</span>
                                                        <div class="bootstrap-timepicker">
                                                            <div class="form-group">
                                                                <div class="input-group">
                                                                    <input type="text" name="Date" class="form-control date" id="dateXI01" readonly="readonly" value="@(XI01 != null ? XI01.Date.Value.ToShortDateString() : "")"><br>
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Line Xi</span><br />
                                                        <select class="form-control select2" name="Line" id="LineXI01">
                                                            @foreach (var item in WorkCenterXI)
                                                            {
                                                                try
                                                                {
                                                                    if (item.Value == XI01.Line)
                                                                    {
                                                                        <option value="@item.Value" selected>@item.Text</option>
                                                                    }
                                                                    else
                                                                    {
                                                                        <option value="@item.Value">@item.Text</option>
                                                                    }
                                                                }
                                                                catch
                                                                {
                                                                    <option value="@item.Value">@item.Text</option>
                                                                }
                                                            }
                                                        </select>
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>SL mẫu</span>
                                                        <input type="number" name="Amount" class="form-control" required value="@(XI01 != null ? XI01.Amount.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Thông số Xi</span>
                                                        <input type="text" name="Parameter" class="form-control" value="@(XI01 != null ? XI01.Parameter : "")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Loại gá</span>
                                                        <input type="text" name="JigType" class="form-control" value="@(XI01 != null ? XI01.JigType : "")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Số SP</span>
                                                        <input type="number" name="JigAmount" class="form-control" required value="@(XI01 != null ? XI01.JigAmount.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-12">
                                                        <span>Nội dung thay đổi</span>
                                                        <textarea rows="1" name="Description" class="form-control">@(XI01 != null ? XI01.Description : "")</textarea>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <label>NVL</label><br />
                                                        <input type="checkbox" style="transform:scale(2);" id="DSChangeItem" name="DSChangeItem" value="true" @(XI01 != null ? (XI01.DSChangeItem.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-3">
                                                        <label>Máy móc</label><br />
                                                        <input type="checkbox" style=" transform:scale(2);" id="DSChangeMachine" name="DSChangeMachine" value="true" @(XI01 != null ? (XI01.DSChangeMachine.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-3">
                                                        <label>Phương pháp</label><br />
                                                        <input type="checkbox" style=" transform:scale(2);" id="DSChangeMethod" name="DSChangeMethod" value="true" @(XI01 != null ? (XI01.DSChangeMethod.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-3">
                                                        <label>Khác</label><br />
                                                        <input type="checkbox" style=" transform:scale(2);" id="DSChangeOrder" name="DSChangeOrder" value="true" @(XI01 != null ? (XI01.DSChangeOrder.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-12">
                                                        <span>Tiêu chuẩn thành công</span>
                                                        <input rows="1" name="DSSuccessCriteria" class="form-control" value="@(XI01 != null ? XI01.DSSuccessCriteria : "")" />
                                                    </div>
                                                    <div class="col-md-12">
                                                        <span>Ghi chú</span>
                                                        <textarea rows="2" class="form-control" name="Note">@(XI01 != null ? XI01.Note : "")</textarea>
                                                    </div>
                                                </div>
                                            }
                                        </div>
                                        @*SX*@
                                        <div class="col-md-4" style="padding: 10px; background: #b2ccbc ">
                                            @using (Html.BeginForm("XI02", "ProcessRequest", FormMethod.Post))
                                            {
                                                <div class="row">
                                                    <div class="col-md-12" style="text-align:center">
                                                        <strong>SX</strong>
                                                        <button class="btn btn-success" style="background-color: cornflowerblue;float:right" onclick="CheckCreateLine('XI02')"><i class="fa fa-save"></i></button>
                                                    </div>
                                                    <input name="IDRequest" value="@Model.ID" style="display:none" />
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Ngày SX</span>
                                                        <div class="bootstrap-timepicker">
                                                            <div class="form-group">
                                                                <div class="input-group">
                                                                    <input type="text" name="Date" class="form-control date" id="dateXI02" readonly="readonly" value="@(XI02 != null ? XI02.Date.Value.ToShortDateString() : "")"><br>
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Line Xi</span><br />
                                                        <select class="form-control select2" name="Line" id="LineXI02">
                                                            @foreach (var item in WorkCenterXI)
                                                            {
                                                                try
                                                                {
                                                                    if (item.Value == XI02.Line)
                                                                    {
                                                                        <option value="@item.Value" selected>@item.Text</option>
                                                                    }
                                                                    else
                                                                    {
                                                                        <option value="@item.Value">@item.Text</option>
                                                                    }
                                                                }
                                                                catch
                                                                {
                                                                    <option value="@item.Value">@item.Text</option>
                                                                }
                                                            }
                                                        </select>
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>SL mẫu</span>
                                                        <input type="number" name="Amount" class="form-control" required value="@(XI02 != null ? XI02.Amount.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Thông số Xi</span>
                                                        <input type="text" name="Parameter" class="form-control" value="@(XI02 != null ? XI02.Parameter : "")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Loại gá</span>
                                                        <input type="text" name="JigType" class="form-control" value="@(XI02 != null ? XI02.JigType : "")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>SP</span>
                                                        <input type="number" name="JigAmount" class="form-control" required value="@(XI02 != null ? XI02.JigAmount.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-12">
                                                        <span>Nội dung thay đổi</span>
                                                        <textarea rows="1" name="Description" class="form-control">@(XI02 != null ? XI02.Description : "")</textarea>
                                                    </div>
                                                    <div class="col-md-12" style=" padding:5px">
                                                        <span>Thực tế</span>
                                                        <input type="text" name="ActualPrduction" class="form-control" value="@(XI02 != null ? XI02.ActualPrduction : "")" />
                                                    </div>
                                                    <div class="col-md-12">
                                                        <span>Ghi chú</span>
                                                        <textarea rows="2" class="form-control" name="Note">@(XI02 != null ? XI02.Note : "")</textarea>
                                                    </div>
                                                </div>}
                                        </div>
                                        @*QA/QC*@
                                        <div class="col-md-4" style="padding: 10px; background: #899e87 ">
                                            @using (Html.BeginForm("XI03", "ProcessRequest", FormMethod.Post))
                                            {
                                                <div class="row">
                                                    <div class="col-md-12" style="text-align:center">
                                                        <strong>QA/QC</strong>
                                                        <button class="btn btn-success" style="background-color: cornflowerblue;float:right" onclick="CheckCreateLine('XI03')"><i class="fa fa-save"></i></button>
                                                    </div>
                                                    <input name="IDRequest" value="@Model.ID" style="display:none" />
                                                    <div class="col-md-6" style=" padding:5px">
                                                        <span>Ngày SX</span>
                                                        <div class="bootstrap-timepicker">
                                                            <div class="form-group">
                                                                <div class="input-group">
                                                                    <input type="text" name="Date" class="form-control date" id="dateXI03" readonly="readonly" value="@(XI03 != null ? XI03.Date.Value.ToShortDateString() : "")"><br>
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6" style=" padding:5px">
                                                        <span>SL kiểm tra</span>
                                                        <input type="number" name="Amount" class="form-control" required value="@(XI03 != null ? XI03.Amount.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-6" style=" padding:5px">
                                                        <span>SL OK</span>
                                                        <input type="number" name="QCAmountOK" class="form-control" required value="@(XI03 != null ? XI03.QCAmountOK.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-6" style=" padding:5px">
                                                        <span>SL NG</span>
                                                        <input type="number" name="QCAmountNG" class="form-control" required value="@(XI03 != null ? XI03.QCAmountNG.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-6" style="text-align:center">
                                                        <span style="margin-right:8px">Kích thước</span>
                                                        <input type="checkbox" style="transform:scale(2);" id="QCSize" name="QCSize" value="true" @(XI03 != null ? (XI03.QCSize.Value ? "checked" : "") : "") />

                                                    </div>
                                                    <div class="col-md-6">
                                                        <input class="form-control" type="file" value="@(XI03 != null ? XI03.QCSizeFile : "")" name="QCSizeFile" />
                                                    </div>
                                                    <br />
                                                    <div class="col-md-6" style="text-align:center">
                                                        <span style="margin-right:8px">Chức năng</span>
                                                        <input type="checkbox" style="transform:scale(2);" id="QCSize" name="QCFunction" value="true" @(XI03 != null ? (XI03.QCFunction.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-6">
                                                        <input class="form-control" type="file" value="@(XI03 != null ? XI03.QCFunctionFile : "")" name="QCFunctionFile" />
                                                    </div>
                                                    <br />
                                                    <div class="col-md-6" style="text-align:center">
                                                        <span style="margin-right:8px">Ngoại quan</span>
                                                        <input type="checkbox" style="transform:scale(2);" id="QCSize" name="QCExternal" value="true" @(XI03 != null ? (XI03.QCExternal.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-6">
                                                        <input class="form-control" type="file" value="@(XI03 != null ? XI03.QCExternalFile : "")" name="QCExternalFile" />
                                                    </div>
                                                    <br />
                                                    <div class="col-md-12">
                                                        <span>Ghi chú</span>
                                                        <textarea rows="2" class="form-control" name="Note">@(XI03 != null ? XI03.Note : "")</textarea>
                                                    </div>
                                                    <div class="col-md-12" style="text-align:center">
                                                        <span>Xác nhận hoàn thành công đoạn</span><br />
                                                        <input type="checkbox" style="height:60px; width:60px;" id="Status" name="Status" value="true" @(XI03 != null ? (XI03.Status.Value ? "checked" : "") : "") />
                                                    </div>
                                                </div>}
                                        </div>
                                    </div>

                                </div>
                            </div>
                        }
                        if (Model.SN)
                        {
                            Model.EF.Processing_SN SN01 = ListSN.Where(x => x.Type.Value == 1).FirstOrDefault();
                            Model.EF.Processing_SN SN02 = ListSN.Where(x => x.Type.Value == 2).FirstOrDefault();
                            Model.EF.Processing_SN SN03 = ListSN.Where(x => x.Type.Value == 3).FirstOrDefault();
                            <div class="row">
                                <div class="col-md-12" style="text-align:center">
                                    <strong style="font-size:30px">Sơn in</strong>
                                </div>
                                <div class="col-md-12">
                                    <div class="row">
                                        @*Thiết kế*@
                                        <div class="col-md-4" style="padding: 10px; background: #c7e3ce;" id="EN01">
                                            @using (Html.BeginForm("SN01", "ProcessRequest", FormMethod.Post))
                                            {
                                                <div class="row">
                                                    <div class="col-md-12" style="text-align:center">
                                                        <label style="float:unset"><strong>Thiết kế</strong></label>
                                                        <button class="btn btn-success" style="background-color: cornflowerblue;float:right" onclick="CheckCreateLine('SN01')"><i class="fa fa-save"></i></button>
                                                    </div>
                                                    <input name="IDRequest" value="@Model.ID" style="display:none" />
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Ngày SX</span>
                                                        <div class="bootstrap-timepicker">
                                                            <div class="form-group">
                                                                <div class="input-group">
                                                                    <input type="text" name="Date" class="form-control date" id="dateSN01" required readonly="readonly" value="@(SN01 != null ? SN01.Date.Value.ToShortDateString() : "")"><br>
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Line Sơn</span><br />
                                                        <select class="form-control select2" name="Line" id="LineSN01">
                                                            @foreach (var item in WorkCenterSN)
                                                            {
                                                                try
                                                                {
                                                                    if (item.Value == SN01.Line)
                                                                    {
                                                                        <option value="@item.Value" selected>@item.Text</option>
                                                                    }
                                                                    else
                                                                    {
                                                                        <option value="@item.Value">@item.Text</option>
                                                                    }
                                                                }
                                                                catch
                                                                {
                                                                    <option value="@item.Value">@item.Text</option>
                                                                }
                                                            }
                                                        </select>
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>SL mẫu</span>
                                                        <input type="number" required name="Amount" class="form-control" value="@(SN01 != null ? SN01.Amount.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Thông số Sơn</span>
                                                        <input type="text" name="Parameter" class="form-control" value="@(SN01 != null ? SN01.Parameter : "")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Loại gá</span>
                                                        <input type="text" name="JigType" class="form-control" value="@(SN01 != null ? SN01.JigType : "")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Số SP</span>
                                                        <input type="number" name="JigAmount" required class="form-control" value="@(SN01 != null ? SN01.JigAmount.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-12">
                                                        <span>Nội dung thay đổi</span>
                                                        <textarea rows="1" name="Description" class="form-control">@(SN01 != null ? SN01.Description : "")</textarea>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <label>NVL</label><br />
                                                        <input type="checkbox" style="transform:scale(2);" id="DSChangeItem" name="DSChangeItem" value="true" @(SN01 != null ? (SN01.DSChangeItem.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-3">
                                                        <label>Máy móc</label><br />
                                                        <input type="checkbox" style=" transform:scale(2);" id="DSChangeMachine" name="DSChangeMachine" value="true" @(SN01 != null ? (SN01.DSChangeMachine.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-3">
                                                        <label>Phương pháp</label><br />
                                                        <input type="checkbox" style=" transform:scale(2);" id="DSChangeMethod" name="DSChangeMethod" value="true" @(SN01 != null ? (SN01.DSChangeMethod.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-3">
                                                        <label>Khác</label><br />
                                                        <input type="checkbox" style=" transform:scale(2);" id="DSChangeOrder" name="DSChangeOrder" value="true" @(SN01 != null ? (SN01.DSChangeOrder.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-12">
                                                        <span>Tiêu chuẩn thành công</span>
                                                        <input rows="1" name="DSSuccessCriteria" class="form-control" value="@(SN01 != null ? SN01.DSSuccessCriteria : "")" />
                                                    </div>
                                                    <div class="col-md-12">
                                                        <span>Ghi chú</span>
                                                        <textarea rows="2" class="form-control" name="Note">@(SN01 != null ? SN01.Note : "")</textarea>
                                                    </div>
                                                </div>
                                            }
                                        </div>
                                        @*SX*@
                                        <div class="col-md-4" style="padding: 10px; background: #b2ccbc ">
                                            @using (Html.BeginForm("SN02", "ProcessRequest", FormMethod.Post))
                                            {
                                                <div class="row">
                                                    <div class="col-md-12" style="text-align:center">
                                                        <strong>SX</strong>
                                                        <button class="btn btn-success" style="background-color: cornflowerblue;float:right" onclick="CheckCreateLine('SN02')"><i class="fa fa-save"></i></button>
                                                    </div>
                                                    <input name="IDRequest" value="@Model.ID" style="display:none" />
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Ngày SX</span>
                                                        <div class="bootstrap-timepicker">
                                                            <div class="form-group">
                                                                <div class="input-group">
                                                                    <input type="text" name="Date" id="dateSN02" class="form-control date" readonly="readonly" value="@(SN02 != null ? SN02.Date.Value.ToShortDateString() : "")"><br>
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Line Sơn</span><br />
                                                        <select class="form-control select2" name="Line" id="LineSN02">
                                                            @foreach (var item in WorkCenterSN)
                                                            {
                                                                try
                                                                {
                                                                    if (item.Value == SN02.Line)
                                                                    {
                                                                        <option value="@item.Value" selected>@item.Text</option>
                                                                    }
                                                                    else
                                                                    {
                                                                        <option value="@item.Value">@item.Text</option>
                                                                    }
                                                                }
                                                                catch
                                                                {
                                                                    <option value="@item.Value">@item.Text</option>
                                                                }
                                                            }
                                                        </select>
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>SL mẫu</span>
                                                        <input type="number" name="Amount" class="form-control" required value="@(SN02 != null ? SN02.Amount.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Thông số Sơn</span>
                                                        <input type="text" name="Parameter" class="form-control" value="@(SN02 != null ? SN02.Parameter : "")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>Loại gá</span>
                                                        <input type="text" name="JigType" class="form-control" value="@(SN02 != null ? SN02.JigType : "")" />
                                                    </div>
                                                    <div class="col-md-4" style=" padding:5px">
                                                        <span>SP</span>
                                                        <input type="number" name="JigAmount" class="form-control" required value="@(SN02 != null ? SN02.JigAmount.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-12">
                                                        <span>Nội dung thay đổi</span>
                                                        <textarea rows="1" name="Description" class="form-control">@(SN02 != null ? SN02.Description : "")</textarea>
                                                    </div>
                                                    <div class="col-md-12" style=" padding:5px">
                                                        <span>Thực tế</span>
                                                        <input type="text" name="ActualPrduction" class="form-control" value="@(SN02 != null ? SN02.ActualPrduction : "")" />
                                                    </div>
                                                    <div class="col-md-12">
                                                        <span>Ghi chú</span>
                                                        <textarea rows="2" class="form-control" name="Note">@(SN02 != null ? SN02.Note : "")</textarea>
                                                    </div>
                                                </div>}
                                        </div>
                                        @*QA/QC*@
                                        <div class="col-md-4" style="padding: 10px; background: #899e87 ">
                                            @using (Html.BeginForm("SN03", "ProcessRequest", FormMethod.Post))
                                            {
                                                <div class="row">
                                                    <div class="col-md-12" style="text-align:center">
                                                        <strong>QA/QC</strong>
                                                        <button class="btn btn-success" style="background-color: cornflowerblue;float:right" onclick="CheckCreateLine('SN03')"><i class="fa fa-save"></i></button>
                                                    </div>
                                                    <input name="IDRequest" value="@Model.ID" style="display:none" />
                                                    <div class="col-md-6" style=" padding:5px">
                                                        <span>Ngày SX</span>
                                                        <div class="bootstrap-timepicker">
                                                            <div class="form-group">
                                                                <div class="input-group">
                                                                    <input type="text" name="Date" id="dateSN03" class="form-control date" readonly="readonly" value="@(SN03 != null ? SN03.Date.Value.ToShortDateString() : "")"><br>
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6" style=" padding:5px">
                                                        <span>SL kiểm tra</span>
                                                        <input type="number" name="Amount" readonly class="form-control" value="@(SN03 != null ? SN03.Amount.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-6" style=" padding:5px">
                                                        <span>SL OK</span>
                                                        <input type="number" name="QCAmountOK" readonly class="form-control" value="@(SN03 != null ? SN03.QCAmountOK.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-6" style=" padding:5px">
                                                        <span>SL NG</span>
                                                        <input type="number" name="QCAmountNG" readonly class="form-control" value="@(SN03 != null ? SN03.QCAmountNG.Value.ToString() : "0")" />
                                                    </div>
                                                    <div class="col-md-6" style="text-align:center">
                                                        <span style="margin-right:8px">Kích thước</span>
                                                        <input type="checkbox" style="transform:scale(2);" id="QCSize" name="QCSize" value="true" @(SN03 != null ? (SN03.QCSize.Value ? "checked" : "") : "") />

                                                    </div>
                                                    <div class="col-md-6">
                                                        <input class="form-control" type="file" value="@(SN03 != null ? SN03.QCSizeFile : "")" name="QCSizeFile" />
                                                    </div>
                                                    <br />
                                                    <div class="col-md-6" style="text-align:center">
                                                        <span style="margin-right:8px">Chức năng</span>
                                                        <input type="checkbox" style="transform:scale(2);" id="QCSize" name="QCFunction" value="true" @(SN03 != null ? (SN03.QCFunction.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-6">
                                                        <input class="form-control" type="file" value="@(SN03 != null ? SN03.QCFunctionFile : "")" name="QCFunctionFile" />
                                                    </div>
                                                    <br />
                                                    <div class="col-md-6" style="text-align:center">
                                                        <span style="margin-right:8px">Ngoại quan</span>
                                                        <input type="checkbox" style="transform:scale(2);" id="QCSize" name="QCExternal" value="true" @(SN03 != null ? (SN03.QCExternal.Value ? "checked" : "") : "") />
                                                    </div>
                                                    <div class="col-md-6">
                                                        <input class="form-control" type="file" value="@(SN03 != null ? SN03.QCExternalFile : "")" name="QCExternalFile" />
                                                    </div>
                                                    <br />
                                                    <div class="col-md-12">
                                                        <span>Ghi chú</span>
                                                        <textarea rows="2" class="form-control" name="Note">@(SN03 != null ? SN03.Note : "")</textarea>
                                                    </div>
                                                    <div class="col-md-12" style="text-align:center">
                                                        <span>Xác nhận hoàn thành công đoạn</span><br />
                                                        <input type="checkbox" style="height:60px; width:60px;" id="Status" name="Status" value="true" @(SN03 != null ? (SN03.Status.Value ? "checked" : "") : "") />
                                                    </div>
                                                </div>}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }

                        <div class="col-md-12">
                            @using (Html.BeginForm("SNOQABODApprove", "ProcessRequest", FormMethod.Post))
                            {
                                <input name="ID" value="@Model.ID" style="display:none" />
                                <div class="table-responsive">
                                    <table class="table table-striped table-bordered table-hover">
                                        <thead>
                                            <tr>
                                                <th style="width: 20%;">QA</th>
                                                <th style="width: 20%;">BOD</th>
                                            </tr>
                                        </thead>
                                        <tbody style="text-align:center">
                                            <tr>
                                                <td style="background: #effde2;">
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            @Html.CheckBoxFor(model => model.QAApprove, new { @style = "height:60px; width:60px;" })
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="radio-inputs" style=" top: 50%; left: 50%; transform: translate(-50%, -50%);">
                                                                <label class="radio">
                                                                    <input type="radio" name="QAApproveType" value="0" @(Model.QAApproveType == 0 ? "checked" : "")>
                                                                    <span class="name">Chạy mass</span>
                                                                </label>
                                                                <label class="radio">
                                                                    <input type="radio" name="QAApproveType" value="1" @(Model.QAApproveType == 1 ? "checked" : "")>
                                                                    <span class="name">SL lớn</span>
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    @Html.TextAreaFor(model => model.QANote, new { @class = "form-control", @rows = 1 })
                                                </td>
                                                <td style="background: #effde2;">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            @Html.CheckBoxFor(model => model.BODApprove, new { @style = "height:60px; width:60px;" })
                                                        </div>
                                                        <div class="col-md-12">
                                                            @Html.TextAreaFor(model => model.BODNote, new { @class = "form-control", @rows = 1 })
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    @if (Model.QAApprove != null)
                                                    {<span> @Model.QAApproveDate</span>}
                                                </td>
                                                <td>
                                                    @if (Model.BODApprove != null)
                                                    {<span> @Model.BODApproveDate</span>}
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <div class="card-footer">
                                        <div class="col-md-12">
                                            @if (Model.Status)
                                            {
                                                <input type="submit" value="Lưu" class="btn btn-info" style="float:left" />
                                                @*<input hidden value="0" name="cancel" id="cancel" />
                                                    <input type="submit" value="Huỷ phiếu" class="btn btn-danger" style="float:right" onclick="Cancel()" />*@<input hidden value="0" name="cancel" id="cancel" />
                                                <input type="submit" value="Huỷ phiếu" class="btn btn-danger" style="float:right" onclick="Cancel()" />
                                            }
                                        </div>
                                    </div>
                                </div>}
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>


</div>


