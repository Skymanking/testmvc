@model List<Model.EFBIO.iclock_transaction1>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Theme3.cshtml";
    // var listnv = (IEnumerable<Model.EFBIO.iclock_transaction>)ViewBag.dsnv;
    int demM = 0;
    int demB = 0;
    int demC = 0;
}

@section jsFooter
{
    <script src="/Assets/plugin/ckfinder/ckfinder.js"></script>
    <script src="/Assets/theme3/plugins/datepicker/js/bootstrap-datetimepicker.js"></script>
    <script src="/Assets/theme3/plugins/datepicker/js/locales/bootstrap-datetimepicker.fr.js" charset="UTF-8"></script>
    <script src="/Assets/theme3/plugins/timepicker/bootstrap-timepicker.min.js"></script>
    <script>
        $(function () {
            $("#ngay1").datepicker();
            $("#ngay2").datepicker();
            $('input[type="checkbox"].flat-green, input[type="radio"].flat-green').iCheck({
                checkboxClass: 'icheckbox_flat-green',
                radioClass: 'iradio_flat-green'
            })
        })
    </script>



}


<script src="~/Scripts/jquery-3.4.1.min.js"></script>
<div class="card card-primary">
    <div class="card-header">
        <h3 class="card-title">Tìm kiếm nâng cao</h3>
        <div class="card-tools">
            <div class="btn-group" style="height:37px">
                <button type="button" class="btn btn-success btn-sm dropdown-toggle" data-toggle="dropdown">
                    More
                </button>
                <div class="dropdown-menu float-right" role="menu">
                    <a href="/iclock_transaction/Report2" style="color:black;" class="dropdown-item">Normal</a>
                    <a href="/iclock_transaction/Report2" style="color:black;" class="dropdown-item">Thống kê</a>
                </div>
            </div>


        </div>

    </div>

    <div class="card-body">
        @using (Html.BeginForm("Report2", "iclock_transaction", FormMethod.Get))
        {
            <div class="row">
                @*<div class="col-md-2">
                        <div class="callout callout-info">
                            <label class="control-label" style="color: #FF5722;">Chấm công</label><br>
                            <label><input type="radio" class="flat-green" id="chamcong" name="chamcong" value="null" checked />Tất cả</label><br>
                            <label><input type="radio" class="flat-green" id="chamcong" name="chamcong" value="true" />Đã chấm công</label><br>
                            <label><input type="radio" class="flat-green" id="chamcong" name="chamcong" value="false" />Chưa chấm công</label><br>
                        </div>
                    </div>*@
                <div class="col-md-2">
                    <div class="callout callout-info">
                        <label class="control-label" style="color: #FF5722;">Buổi</label><br>
                        <label><input type="radio" class="flat-green" id="buoi" name="buoi" value="null" checked />Tất cả</label><br>
                        <label><input type="radio" class="flat-green" id="buoi" name="buoi" value="7" />Cơm Sáng</label><br>
                        <label><input type="radio" class="flat-green" id="buoi" name="buoi" value="17" />Cơm Tối</label><br>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="callout callout-info">
                        <label class="control-label" style="color: #FF5722;">Xưởng</label><br>
                        <label><input type="radio" class="flat-green" id="xuong" name="xuong" value="null" checked />Tất cả</label><br>
                        <label><input type="radio" class="flat-green" id="xuong" name="xuong" value="1" />Xưởng 1</label><br>
                        <label><input type="radio" class="flat-green" id="xuong" name="xuong" value="2" />Xưởng 2 + 3</label><br>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="callout callout-info">
                        <label class="control-label" style="color: #FF5722;">Món</label><br>
                        <label><input type="radio" class="flat-green" id="mon" name="mon" value="null" checked />Tất cả</label><br>
                        <label><input type="radio" class="flat-green" id="mon" name="mon" value="Mặn" />Món mặn</label><br>
                        <label><input type="radio" class="flat-green" id="mon" name="mon" value="Bánh Sữa" />Chay & Bánh sữa</label><br>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="callout callout-info">
                        <label class="control-label" style="color: #FF5722;">Ngày</label>
                        <div class="bootstrap-timepicker">
                            <div class="form-group">
                                <div class="input-group">
                                    <input type="text" id="ngay1" name="ngay1" class="time1 form-control" readonly="readonly"><br>
                                    <div class="input-group-append">
                                        <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="callout callout-info">
                        <label class="control-label" style="color: #FF5722;">Tìm kiếm</label><br>
                        <input type="text" class="form-control" id="searchString" name="searchString" placeholder="Tìm kiếm" />
                    </div>
                </div>
                <div class="col-md-2 text-center">
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary"><i class="fa fa-search"></i>Tìm kiếm</button>
                    </div>
                </div>
            </div>
        }
        <script src="~/Scripts/jquery-1.9.1.min.js"></script>
    </div>
    <div class="card-footer">

    </div>

</div>
<div class="row">
    <div class="col-md-12">
        <div class="card card-success card-outline">
            <div class="card-header">
                <h3 class="card-title"><i class="fa fa-clipboard"></i>Báo cơm</h3>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover">
                            <thead>
                                <tr>
                                    <th>Mã NV</th>
                                    <th>TenNV</th>
                                    <th colspan="3">Com</th>
                                    <th>Status</th>
                                    <th>Check</th>
                                    <th>Check1</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td>Mặn</td>
                                    <td>Chay</td>
                                    <td>Bánh sữa</td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td id="iddemM"></td>
                                    <td id="iddemC"></td>
                                    <td id="iddemB"></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                @foreach (var item in Model)
                                {
                                    <tr>
                                        <td>@item.emp_code</td>
                                        <td>@item.first_name</td>
                                        <td colspan="3">@item.MaCom</td>
                                        <td>@item.Status1</td>
                                        <td>@item.punch_time.Day/@item.punch_time.Month/@item.punch_time.Year</td>
                                        <td>@item.Start_time</td>
                                        @if (item.MaCom.Contains("Bánh Sữa"))
                                        {
                                            demB++;
                                        }
                                        @if (item.MaCom.Contains("Chay"))
                                        {
                                            demC++;
                                        }
                                        @if (item.MaCom.Contains("Mặn"))
                                        {
                                            demM++;
                                        }

                                    </tr>

                                }
                            </tbody>
                        </table>

                    </div>
                </div>
                <script>
                    $(document).ready(function () {
                        var tbpduyet = $("input[name=chamcong]:checked").val();
                        var pgdduyet = $("input[name=buoi]:checked").val();
                        var gdduyet = $("input[name=xuong]:checked").val();
                        var mhduyet = $("input[name=mon]:checked").val();
                        var ngay1 = $('#ngay1').val();
                        var searchString = $('#searchString').val();
                        $('#inbaocao').attr("href", '/iclock_transaction/Report2?chamcong=' + chamcong + '&buoi=' + buoi + '&xuong=' + xuong + '&mon=' + mon + '&ngay1=' + ngay1 + '&searchString=' + searchString);

                        $("#inbaocao").focus(function () {
                            var tbpduyet = $("input[name=chamcong]:checked").val();
                            var pgdduyet = $("input[name=buoi]:checked").val();
                            var gdduyet = $("input[name=xuong]:checked").val();
                            var mhduyet = $("input[name=mon]:checked").val();
                            var ngay1 = $('#ngay1').val();
                            var searchString = $('#searchString').val();
                            $('#inbaocao').attr("href", '/iclock_transaction/Report2?chamcong=' + chamcong + '&buoi=' + buoi + '&xuong=' + xuong + '&mon=' + mon + '&ngay1=' + ngay1 + '&searchString=' + searchString);

                        });
                    });
                </script>
                <script type="text/javascript">
                    document.getElementById("iddemM").innerHTML = "<span style='font-size: 22px;color: red;'>" +@demM +"</span> "
                    document.getElementById("iddemC").innerHTML = "<span style='font-size: 22px;color: red;'>" +@demC +"</span> "
                    document.getElementById("iddemB").innerHTML = "<span style='font-size: 22px;color: red;'>" +@demB +"</span> "
                </script>
                <div class="card-footer clearfix">

                </div>
                <!-- /.panel-body -->
            </div>

        </div>
    </div>
</div>
