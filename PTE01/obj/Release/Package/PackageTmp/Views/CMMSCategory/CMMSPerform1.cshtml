@model List<Model.EF.CMMSItem>
@{
    ViewBag.Title = "Perform";
    Layout = "~/Views/Shared/_Theme3.cshtml";
    var Category = (Model.EF.CMMSCategory)ViewBag.Category;
}
@section jsFooter
{
    <script src="/Assets/plugin/ckfinder/ckfinder.js"></script>
    <script src="/Assets/theme3/plugins/datepicker/js/bootstrap-datetimepicker.js"></script>
    <script src="/Assets/theme3/plugins/datepicker/js/locales/bootstrap-datetimepicker.fr.js" charset="UTF-8"></script>
    <!-- Bootstrap slider -->
    <script src="/Assets/theme3/plugins/bootstrap-slider/bootstrap-slider.js"></script>
    <script>
        $(function () {
            $('.form_datetime').datetimepicker({
                format: 'mm/dd/yyyy hh:ii',
                todayBtn: 1,
                autoclose: 1,
                todayHighlight: 1,
                startDate: new Date,
            });
            $('.select2').select2()

        })
    </script>
    <script src="~/Scripts/CreateChecklistItem.js"></script>
    <script>
        $(function () {

            $('input[type="checkbox"].flat-green, input[type="radio"].flat-green').iCheck({
                checkboxClass: 'icheckbox_flat-green',
                radioClass: 'iradio_flat-green'
            })
            $('input[type="checkbox"].flat-red, input[type="radio"].flat-red').iCheck({
                checkboxClass: 'icheckbox_flat-red',
                radioClass: 'iradio_flat-red'
            })
        })
    </script>
    <style>
        input, label {
            vertical-align: middle;
        }

        .qrcode-text {
            padding-right: 1.7em;
            margin-right: 0;
            width: 95%
        }

        .qrcode-text-btn {
            display: inline-block;
            background: url(/Assets/theme3/dist/img/qr_icon.svg) 50% 50% no-repeat;
            height: 30px;
            width: 30px;
            margin-left: -40px;
            margin-top: 10px;
            cursor: pointer;
        }

            .qrcode-text-btn > input[type=file] {
                position: absolute;
                overflow: hidden;
                width: 1px;
                height: 1px;
                opacity: 0;
            }

        .center {
            display: flex;
            justify-content: center;
            align-items: center;
            color: aqua;
        }
    </style>

    <script src="~/Scripts/CMMSCategory.js"></script>
}
<script src="~/Scripts/jquery-3.4.1.min.js"></script>
<div class="card card-primary">
    <div class="card-header">
        <h3 class="card-title">Bảo trì</h3>
    </div>
    @using (Html.BeginForm("CMMSPerform", "CMMSCategory", FormMethod.Post))
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="card-body">
            <div class="row">

                <div class="col-md-12">
                    <div class="row" style=" padding-bottom: 15px;">
                        <div class="col-md-5 col-6">
                            <label class="control-label col-md-12">Tên Hạng mục<span style="font-weight:bold;color:red">*</span></label>
                            <div class="form-group">
                                <input name="IDCat" value="@Category.ID" hidden />
                                <input style="width:100%" class="form-control" value="@Category.Name" readonly />
                            </div>

                        </div>
                        <div class="col-md-5 col-6">
                            <label class="control-label col-md-12">Tên Thiết bị<span style="font-weight:bold;color:red">*</span></label>
                            <div class="form-group">
                                <input name="IDCat" value="@Category.ID" hidden />
                                <input style="width:100%" class="form-control" value="@Category.NameDevice" readonly />
                            </div>

                        </div>
                        <div class="col-md-2 col-6">
                            <label class="control-label col-md-12">Chu kỳ<span style="font-weight:bold;color:red">*</span></label>
                            <div class="form-group">
                                <input style="width: 100%" class="form-control" value="@Category.Cycle Ngày" readonly />
                            </div>

                        </div>
                        <div class="col-md-12 col-12">
                            <label class="control-label col-md-12">Ghi chú<span style="font-weight:bold;color:red">*</span></label>
                            <div class="form-group">
                                <input style="width: 100%" class="form-control" value="@Category.Note Ngày" readonly />
                            </div>

                        </div>
                    </div>
                </div>
                <div class=" col-md-12">
                        <label style="text-align:center" class="control-label col-md-12">Xác nhận hoàn thành hạng mục</label>
                    <div class="datcom d-flex justify-content-center">
                        <input type='checkbox' id='check'  name='check' style=" width: 40px; height: 40px;" value="checked">
                    </div>
                </div>
                <div class=" col-md-12">
                    <label class="form-control">
                        Vật tư:
                    </label>
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover">
                            <thead>
                                <tr>
                                    <th width="30px"><input type="checkbox" class="checkallcat1"></th>
                                    <th width="150px">Mã vật tư</th>
                                    <th>Tên vật tư</th>
                                    <th width="100px">Số lượng</th>
                                    <th width="100px">Thực tế</th>
                                    <th width="50px">ĐVT</th>
                                    <th>Ghi chú</th>
                                </tr>
                            </thead>
                            <tbody class="parent">
                                @foreach (var item in Model)
                                {
                                    <tr>
                                        <td><input type='checkbox' id='@item.ID' class='abcde' name='@item.ID'></td>
                                        <td>@item.IDItem</td>
                                        <td>@item.Name</td>
                                        <td>@item.Amount</td>
                                        <td><input type='number' min=1 value='@item.Amount' id='amount_@item.ID' class='form-control'></td>
                                        <td>@item.DVT</td>
                                        <td>@item.Note</td>
                                        <td hidden>@item.IDLink</td>
                                    </tr>
                                    <script>
                                        $(document).ready(function () { $('#@item.ID').change(function () { ScheduleSetup1(); }); });
                                    </script>
                                }
                            </tbody>
                        </table>

                    </div>
                </div>
                <div class=" col-md-12">
                    <label class="control-label col-md-12">Ghi chú<span style="font-weight:bold;color:red">*</span></label>
                    <div class="form-group">
                        <input style="width: 100%" class="form-control" name="Note" />
                    </div>
                </div>
            </div>
        </div>
        <script>
            $(document).ready(function () {
                $(window).keydown(function (event) {
                    if (event.keyCode == 13) {
                        event.preventDefault();
                        return false;
                    }
                });
            });
            $(document).ready(function () {
                var x = document.getElementById("myDIV");
                $("#IDLot").change(function () {
                    var LotID = $("#IDLot option:selected").val();
                    if (LotID == "Null") {
                        x.style.display = "";
                    }
                    else {
                        x.style.display = "none";
                    }
                })
            });
        </script>

        <div class="datcom d-flex justify-content-center">
            <button type="submit" class="btn btn-primary" id="luulai" onclick="ScheduleSetup1()">Lưu thông tin</button>
            <span id="fileinput" style="display:none"></span>
        </div>
    }
</div>