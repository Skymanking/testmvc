@model List<Model.EFBIO.PTE_MQTT>
@{
    ViewBag.Title = "erroMachine";
    Layout = "~/Views/Shared/_Theme3.cshtml";
    string ngaythangnam = "INPUTDATA" + DateTime.Now.ToUniversalTime();
    var listIP = (List<Model.EFBIO.PTE_MQTT>)ViewBag.Linek;
}
@section jsFooter
{
    <script src="/Assets/plugin/ckfinder/ckfinder.js"></script>
    <script src="/Assets/theme3/plugins/datepicker/js/bootstrap-datetimepicker.js"></script>
    <script src="/Assets/theme3/plugins/datepicker/js/locales/bootstrap-datetimepicker.fr.js" charset="UTF-8"></script>
    <script src="/Assets/theme3/plugins/timepicker/bootstrap-timepicker.min.js"></script>

}
<meta http-equiv="refresh" content="5" />
<script src="https://cdn.anychart.com/releases/v8/js/anychart-base.min.js"></script>
<script src="https://cdn.anychart.com/releases/v8/js/anychart-ui.min.js"></script>
<script src="https://cdn.anychart.com/releases/v8/js/anychart-exports.min.js"></script>
<script src="https://cdn.anychart.com/releases/v8/js/anychart-linear-gauge.min.js"></script>
<script src="https://cdn.anychart.com/releases/v8/js/anychart-table.min.js"></script>
<link href="https://cdn.anychart.com/releases/v8/css/anychart-ui.min.css" type="text/css" rel="stylesheet">
<link href="https://cdn.anychart.com/releases/v8/fonts/css/anychart-font.min.css" type="text/css" rel="stylesheet">





<div class="card card-primary" id="here">
    <div class="card-header">
        <h3 class="card-title">MQTT</h3>
        <div class="card-tools">
            <div class="btn-group" style="height:40px">
                <button type="button" class="btn btn-success btn-sm dropdown-toggle" data-toggle="dropdown">
                    More
                </button>
                <div class="dropdown-menu float-right" role="menu">
                    <a class="dropdown-item" href="#" style="color:#000"></a>
                    <a class="dropdown-item" href="#" style="color:#000"></a>
                    <a class="dropdown-item" href="#" style="color:#000"></a>
                </div>
            </div>
        </div>
    </div>
    <div class="card-body">
        @foreach (var IP in listIP)
{
    foreach (var item in Model)
    {
        if (@IP.IP == @item.IP)
        {
            <div class="col-md-3" style="display: inline-block; width: 100%; height: 300px; margin: 0; padding: 0;">
                <div style="text-align:center; " id="chart_div_@item.ID" class="d-flex justify-content-center"></div>
                <div style="text-align:center; font-size: 20px">@item.Temp</div>
            </div>

                    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
                    <script type="text/javascript">
                        google.charts.load('current', { 'packages': ['gauge'] });
                        google.charts.setOnLoadCallback(drawChart);

                        function drawChart() {

                            var data = google.visualization.arrayToDataTable([
                              ['Label', 'Value'],
                              ['@item.IP', @(Convert.ToInt32(item.Temp.Value))],
                            ]);

                            var options = {
                                width: 600, height: 200,
                                redFrom: 90, redTo: 200,
                                yellowFrom: 60, yellowTo: 90,
                                minorTicks: 5,
                                max: 200,
                                min: 0
                            };

                            var chart = new google.visualization.Gauge(document.getElementById('chart_div_@item.ID'));
                            chart.draw(data, options);
                        }
                    </script>
                    break;
                }
            }
        }
    </div>
</div>