@model PagedList.IPagedList<Model.View.PInOut3>
@using PagedList.Mvc;
@{
    ViewBag.Title = "CheckIn";
    Layout = "~/Views/Shared/_Theme2.cshtml";
    //var listitem =(List<Model.View.PInOut3>) ViewBag.listitem;

}
@section jsFooter
{
    <script src="~/Scripts/CreateDetailPInOut.js"></script>
}

<div class="row" style="padding:3px">
    <script src="~/Scripts/jquery-1.9.1.min.js">
        var input = document.getElementById("idtag");

        // Execute a function when the user presses a key on the keyboard
        input.addEventListener("keypress", function (event) {
            // If the user presses the "Enter" key on the keyboard
            if (event.key === "Enter") {
                // Cancel the default action, if needed
                event.preventDefault();
                // Trigger the button element with a click
                document.getElementById("inbaocao").click();
            }
        });
    </script>
    <script>
       
        $(document).ready(function () {

            $("#inbaocao").click(function () {
                var idtag = $("#idtag").val();
                if (idtag == "") {
                    alert("hãy quét thẻ cầu");
                    $('#inbaocao').attr("href", '#');
                }
                else { $('#inbaocao').attr("href", '/PInOut/CheckIn?idtag=' + idtag); }

            });
        });

    </script>
    <div class="input-group" style="height: 50px;">
        <div class="input-group-prepend">
            <span class="input-group-text" style="font-size: 22px;"><i class="fa fa-credit-card" aria-hidden="true"></i></span>
        </div>
        <input class="form-control" id="idtag" placeholder="quét thẻ nhân viên" type="text" autofocus="autofocus" style="font-size: 22px;">
        <div class="input-group-prepend">
            <a class="input-group-text" id="inbaocao" style="font-size: 22px;"> <i class="fa fa-search" aria-hidden="true"></i>Tìm kiếm</a>
        </div>
    </div>
</div>
<div class="row">

</div>

@if (Model != null)
{
    foreach (var item in Model)
    {
        <div class="col-12">
            <div class="card card-success card-outline">
                <div class="card-header">
                    <h3 class="card-title"><i class="fa fa-clipboard"></i>RA VÀO CỔNG</h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-4">
                            <img class="img-fluid pad" src="@item.Image1" alt="Photo">
                        </div>
                        <div class="col-8">
                            <div class="row">     
                                <span class="ravao col-6" data-id="@item.ID" data-type="0" data-note="" style="width: 240px; height: 120px; font-size: 34px; background: #6fdb87; padding: 25px; border: 10px #fff solid; ">NHÂN VIÊN RA</span>
                                <span class="ravao col-6" data-id="@item.ID" data-type="1" data-note="" style="width: 240px; height: 120px; font-size: 34px; background: #f6cb4a; padding: 25px; border: 10px #fff solid; ">NHÂN VIÊN VÀO</span>
                                <span class="ravao col-6" data-id="@item.ID" data-type="2" data-note="" style="width: 240px; height: 190px; font-size: 34px; background: #10a832; padding: 25px; border: 10px #fff solid; ">NHÂN VIÊN RA CÓ HÀNG HÓA</span>
                                <span class="ravao col-6" data-id="@item.ID" data-type="3" data-note="" style="width: 240px; height: 190px; font-size: 34px; background: #dda703; padding: 25px; border: 10px #fff solid; ">NHÂN VIÊN VÀO CÓ HÀNG HÓA</span>

                            </div>                          

                        </div>
                        <div class="col-4">
                            <img class="img-fluid pad" src="@item.Image2" alt="Photo">
                        </div>
                        <div class="col-4">
                            <h2 style="color: #dc3545;">@item.PerName</h2>
                            <h3>@item.DepName</h3>
                            <h4 style="font-weight: bold; color: #28a745;">@item.TimeFrom.ToString("dd/MM/yyyy") @item.TimeFrom.ToString("HH:mm")-@item.TimeTo.ToString("HH:mm")</h4>
                            <h2 style="color: #dc3545;">@item.GName</h2>
                            <h4>@item.GNote</h4>
                        </div>
                        <div class="col-4">
                            <table class="table table-bordered text-center">
                                <thead>
                                    <tr>
                                        <th>Loại</th>
                                        <th>Thời gian</th>
                                        <th>BV</th>
                                    </tr>
                                </thead>
                                @if (item.detail != null)
                                {
                                    foreach (var itemde in item.detail)
                                    {
                                        if (@itemde.Type == 0)
                                        {
                                            <tr>
                                                <td>RA</td>
                                                <td>@itemde.Time.ToString("dd/MM/yyyy HH:mm")</td>
                                                <td>@itemde.BV</td>
                                            </tr>
                                        }
                                        if (@itemde.Type == 1)
                                        {
                                            <tr>
                                                <td>VÀO</td>
                                                <td>@itemde.Time.ToString("dd/MM/yyyy HH:mm")</td>
                                                <td>@itemde.BV</td>
                                            </tr>
                                        }
                                        if (@itemde.Type == 2)
                                        {
                                            <tr>
                                                <td>ĐEM RA</td>
                                                <td>@itemde.Time.ToString("dd/MM/yyyy HH:mm")</td>
                                                <td>@itemde.BV</td>
                                            </tr>
                                        }
                                        if (@itemde.Type == 3)
                                        {
                                            <tr>
                                                <td>ĐEM VÀO</td>
                                                <td>@itemde.Time.ToString("dd/MM/yyyy HH:mm")</td>
                                                <td>@itemde.BV</td>
                                            </tr>
                                        }

                                    }
                                }
                            </table>

                        </div>
                    </div>
                    </div>
            </div>

        </div>
      
        <div class="row">
            <div class="dataTables_paginate paging_simple_numbers float-right" id="example2_paginate">
                @Html.PagedListPager(Model, page => Url.Action("CheckIn", new { page, @idtag = @ViewBag.idtag }))

            </div>
        </div>
    }
}
else
{<span></span>}
