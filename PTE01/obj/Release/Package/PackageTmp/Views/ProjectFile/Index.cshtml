@model PagedList.IPagedList<Model.View.ProjectFile1>
@using PagedList.Mvc;
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Theme3.cshtml";

    bool edited = false;
}
@section jsFooter
{
    <script src="/Scripts/ChangeReadedProjectFile.js"></script>

}
<script src="~/Scripts/jquery-1.9.1.min.js"></script>
<div class="row">
    <div class="col-md-12">
        <div class="card card-success card-outline">
            <div class="card-header">
                <h3 class="card-title">Hồ Sơ</h3>
                <div class="card-tools">                   
                    <a href="/ProjectFile/Create" data-toggle="tooltip" title="Thêm mới "><i class="fa fa-plus-circle" style="font-size: 40px; color: red"></i></a>
                    <div style="float:left">
                        @using (Html.BeginForm("Index", "ProjectFile", FormMethod.Get))
                        {
                            <div class="input-group " style="width: 200px;">
                                <input type="text" value="@ViewBag.SearchString" name="searchString" class="form-control float-right" placeholder="tìm kiếm">
                                <div class="input-group-append">
                                    <button type="submit" class="btn btn-default"><i class="fa fa-search"></i></button>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
            <!-- /.panel-heading -->
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped table-bordered table-hover">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Tên hồ sơ</th>
                                <th>Dự Án</th>
                                <th>Người tạo</th>
                                <th>Ngày áp dụng</th>
                                <th>Loại</th>
                                <th>Version</th>
                                <th style="width:100px;">Hồ sơ liên quan</th>
                                <th style="width:50px;">File</th>
                                <th style="width:50px;">Edit</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {

                                <tr>
                                    @{edited = false; }

                                    <td>@item.ID</td>
                                    <td>@item.Name</td>
                                    <td>@item.ProjectName @if(item.Customer != "" && item.Customer != null) {<span>(@item.Customer)</span> }</td>
                                    <td>@item.CreateBy</td>
                                    <td>@item.ApplyDate.ToString("dd/MM/yyyy")</td>
                                    <td>
                                        @switch(@item.Type)
                                        {
                                            case "YCBG": <span>Yêu Cầu Báo Giá</span> ;break;
                                            case "BGKT": <span>Báo Giá Của Kế Toán</span> ;break;
                                            case "PANA": <span>Phân Tích Giá</span> ;break;
                                            case "BGKD": <span>Báo Giá Gửi Khách Hàng</span> ;break;
                                            case "HDKD": <span>Hợp Đồng</span> ;break;
                                            case "KHAC": <span>Khác</span> ;break;
                                        }
                                    
                                    </td>
                                    <td>
                                            @switch (@item.Status)
                                            {
                                                case 0: <span>Hủy</span> ; break;
                                                case 1: <span>Chính thức</span> ; break;
                                                case 2: <span>Tạm thời</span> ; break;
                                                case 3: <span>Final</span> ; break;
                                                case 4: <span>Khác</span> ; break;
                                            }
                                        @if (item.Verion != "" && item.Verion != null)
                                        {<span>(version: @item.Verion)</span> }
                                    </td>
                                    <td>
                                          <a href="/ProjectFile?searchString=@item.IDPro"><img src="~/Assets/theme3/dist/img/icon-library.png" /></a>
                                    </td>
                                    <td>
                                       @if(item.FileName == "NO")
                                        { <span>no permission</span>}
                                        @if (item.FileName != null && item.FileName.Length > 10)
                                        {<a href="@item.FileName" target="_blank"><img src="~/Assets/theme3/dist/img/icon-pdf.png" /></a>}
                                    </td>
                                    <td>
                             
                                        <a href="/ProjectFile/Edit/@item.ID" ><img src="~/Assets/theme3/dist/img/icon-editer.png" /></a>
                                    </td>
                                </tr>
                            }

                        </tbody>
                    </table>
                </div>
            </div>
            <div class="card-footer clearfix">
                <div class="dataTables_paginate paging_simple_numbers float-right" id="example2_paginate">
                    @Html.PagedListPager(Model, page => Url.Action("Index", new { page, @searchString = @ViewBag.SearchString }))
                </div>
            </div>
        </div>
    </div>
</div>
