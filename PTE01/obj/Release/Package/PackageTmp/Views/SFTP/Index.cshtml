@model List<Model.EF.SFTP>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Theme3.cshtml";
    var listU = (IEnumerable<Model.View.UserView2>)ViewBag.listUser;

    var staff = new List<SelectListItem>();
    var permission = new List<SelectListItem>();
    staff.Add(new SelectListItem
    {
        Text = "",
        Value = "",
    });
    staff.Add(new SelectListItem
    {
        Text = "Tất cả",
        Value = "AllUser",
    });
    permission.Add(new SelectListItem
    {
        Text = "View",
        Value = "0",
    });
    permission.Add(new SelectListItem
    {
        Text = "Download",
        Value = "1",
    });
    permission.Add(new SelectListItem
    {
        Text = "Edit",
        Value = "2",
    });
    permission.Add(new SelectListItem
    {
        Text = "Manager",
        Value = "3",
    });

    foreach (var item in listU)
    {
        staff.Add(new SelectListItem
        {
            Text = item.FullName,
            Value = item.UserName,
        });
    }
}
<link rel="stylesheet" href="/Assets/theme3/plugins/datatables/dataTables.bootstrap4.min.css">

<script src="~/Scripts/jquery-3.4.1.min.js"></script>
<link href="~/Assets/js/jquery-ui.css" rel="stylesheet" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<script src="https://cdn.rawgit.com/harvesthq/chosen/gh-pages/chosen.jquery.min.js"></script>
<link href="https://cdn.rawgit.com/harvesthq/chosen/gh-pages/chosen.min.css" rel="stylesheet" />
<script src="~/Scripts/SFTP.js"></script>
@section jsFooter
{
    <script src="/Assets/plugin/ckfinder/ckfinder.js"></script>
    <script src="/Assets/theme3/plugins/datepicker/js/bootstrap-datetimepicker.js"></script>
    <script src="/Assets/theme3/plugins/datepicker/js/locales/bootstrap-datetimepicker.fr.js" charset="UTF-8"></script>
    <script src="/Assets/theme3/plugins/timepicker/bootstrap-timepicker.min.js"></script>
    <script src="/Assets/theme3/plugins/datatables/jquery.dataTables.min.js"></script>
    <script src="/Assets/theme3/plugins/datatables/dataTables.bootstrap4.min.js"></script>

    <script>
        $(function () {
            $("#StartDate").datepicker();
            $("#EndDate").datepicker();
            $('input[type="checkbox"].flat-green, input[type="radio"].flat-green').iCheck({
                checkboxClass: 'icheckbox_flat-green',
                radioClass: 'iradio_flat-green'
            })
        })
    </script>
    <script>
        $(function () {
            $("#example1").DataTable();
            $('#baocom').DataTable({
                "paging": false,
                "lengthChange": false,
                "searching": true,
                "ordering": true,
                "info": false,
                "autoWidth": false
            });
        });
    </script>
}
<div class="card card-primary">
    <div class="card-header" style="height: 60px; background-color: #607d8b">
        <h3 class="card-title">Quản lý dữ liệu</h3>
        <div class="card-tools">
            <div style="float:left">
                <div class="input-group-append">
                    <a class="btn btn-primary" id="upload" onclick="importData()" style="background-color: #03a9f4">Upload <i class="fa fa-upload fa-2x"></i></a> &ensp;
                    <a class="btn btn-primary" onclick="CreateFolder()" data-toggle="modal" id="newfolder" style="background-color: #9e9e9e">New Folder <i class="fa fa-plus-circle fa-2x" style="color: red;"></i></a> &ensp;
                    <input type="text" value="@ViewBag.SearchString" name="SearchString" class="form-control float-right" placeholder="tìm kiếm">
                    <button type="submit" class="btn btn-default"><i class="fa fa-search"></i></button>
                </div>

            </div>
        </div>
    </div>
    <div class="row">

        <div class=" col-md-10">
            <div class="table-responsive">
                <a class="btn btn-primary" id="Home" onclick="Home()" style="background-color: #03a9f4; float:left"><i class="fa fa-home"></i> Home </a> &ensp;
                <a class="btn btn-primary" id="Refresh" onclick="refresh()" style="background-color: #03a9f4; float:right">Refresh <i class="fa fa-refresh"></i></a> &ensp;
                <table class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th width="150px">Size</th>
                            <th width="150px">File Type</th>
                            <th width="170px">Last Modified</th>
                            <th width="80px">Download</th>
                        </tr>
                    </thead>
                    <tbody id="gvCustomers2">
                        <input @*type="hidden"*@ id="IDValue" value="1" hidden/>
                        @if (Model != null)
                        {


                            foreach (var item in Model)
                            {
                                if (item.Type == 0)
                                {
                                    <tr id="row_@item.ID" title="@item.Note" ondblclick="OpenFoder(@item.ID, 0)" onclick="Property(@item.ID)" class="rows">
                                        <td><i class="fa fa-folder" style="color:cornflowerblue"></i> &ensp;<span>@item.NameShow</span> </td>
                                        <td>-</td>
                                        <td>Folder</td>
                                        <td>@item.EditDate.Value</td>
                                        <td>-</td>                                        
                                    </tr>
                                }
                                else
                                {

                                    <tr id="row_@item.ID" title="@item.Note" ondblclick="DownLoad(@item.ID)" onclick="Property(@item.ID)" class="rows">
                                        <td><i class="fa fa-file" style="color:cadetblue"></i> &ensp;<span>@item.Name</span> </td>
                                        <td>-</td>
                                        <td>@item.Name.Split('.')[item.Name.Split('.').Length - 1].ToUpper() File</td>
                                        <td>@item.EditDate.Value</td>
                                        <td onclick="DownLoad(@item.ID)"><i class="fa fa-download"></i></td>
                                    </tr>
                                }
                            }
                        }
                    </tbody>
                </table>

            </div>
        </div>
        <div class="col-md-2" id="Property">
            <div>
                <h3 class="card-title" style="text-align:right; font-size:30px; background-color:grey">Property</h3>
                <h3 class="card-title" style="font-size:18px"></h3>
                <br />
                <h3 class="card-title" style="font-size: 18px"></h3>
                <br />

            </div>
        </div>
    </div>
</div>
<div id="Permision">
    <div class="modal fade" id="toolModalPermision" role="dialog">
        <div class="modal-dialog" style="max-width: 900px;">
            <div class="modal-content" id="Permis">
                <div class="modal-header">
                    <button type="button" id="close" class="close" data-dismiss="modal" style="width: 50px; font-size: 20px;">&times;</button>
                    <h4 class="modal-title" style="position: absolute;">Phân quyền</h4>
                </div>
                <div class="modal-body">
                    <input class="control-label" style="color: #FF5722;" id="NameChoseShow"><br>

                    <div class="row">
                        <div class="col-md-9">
                            <div class="callout callout-info">
                                <label class="control-label" style="color: #FF5722;">Nhân viên</label><br>

                                <select style="max-width:200px; width:200px" data-placeholder="Nhân viên" multiple class="chosen-select form-control" id="staffSel">
                                    @foreach (var st in staff)
                                    {
                                        <option style="max-width:200px; width:200px" value="@st.Value">@st.Text</option>
                                    }
                                </select>
                                <input type="hidden" id="ListStaff" name="dep" />
                                <script type="text/javascript">
                                    $("#staffSel").chosen().change(function (event) {
                                        if (event.target == this) {
                                            document.getElementById("ListStaff").value = $(this).val();
                                        }
                                    });
                                    $(".chosen-select").chosen({
                                        no_results_text: "Không tìm thấy:"
                                    });
                                    $(".chosen-drop").css({ minWidth: "100%", width: "auto" });
                                    $(".chosen-container").css({ minWidth: "100%", width: "auto" });


                                </script>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <label class="control-label" style="color: #FF5722;">Xóa</label><br>
                            <button id="refe" onclick="Test()" class="form-control">Clear</button>
                        </div>
                        <div class="col-md-2">
                            <label class="control-label" style="color: #FF5722;">Quyền</label><br>
                            <select id="permission" class="form-control">
                                @foreach (var st in permission)
                                {
                                    <option style="max-width:200px; width:200px" value="@st.Value">@st.Text</option>
                                }
                                <option style="max-width:200px; width:200px; color:orangered" value="-1" >BLOCK</option>
                            </select>
                        </div>
                        <div class=" col-md-12">
                            <div class="table-responsive">
                                <table class="table table-striped table-bordered table-hover">
                                    <thead>
                                        <tr>
                                            <th width="50px">Mã NV</th>
                                            <th>Tên NV</th>
                                            <th width="100px">Chức năng</th>
                                            <th width="20px">Delete</th>
                                        </tr>
                                    </thead>
                                    <tbody id="PermisionTable">
                                    </tbody>
                                </table>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="#" onclick="AddPer()" style="background: red; padding: 7px;  color: white;">Lưu thông tin</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="Rename">
    <div class="modal fade" id="toolModalRename" role="dialog">
        <div class="modal-dialog" style="max-width: 900px;">
            <div class="modal-content" id="Renames">
                <div class="modal-header">
                    <button type="button" id="closerename" class="close" data-dismiss="modal" style="width: 50px; font-size: 20px;">&times;</button>
                    <h4 class="modal-title" style="position: absolute;">Sửa tên</h4>
                </div>
                <div class="modal-body">
                    <label class="control-label">Old Name</label>
                    <input class="form-control" style="color: #FF5722;" id="NameChoseShow1" readonly><br>
                </div>
                <div class="modal-body">
                    <label class="control-label">New Name</label>
                    <input class="form-control" style="color: #FF5722;" id="NewName"><br>
                </div>
                <div class="modal-footer">
                    <a href="#" onclick="Rename()" style="background: red; padding: 7px;  color: white;">Rename</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="Delete">
    <div class="modal fade" id="toolModalDelete" role="dialog">
        <div class="modal-dialog" style="max-width: 900px;">
            <div class="modal-content" id="Deletes">
                <div class="modal-header">
                    <button type="button" id="closedel" class="close" data-dismiss="modal" style="width: 50px; font-size: 20px;">&times;</button>
                    <h4 class="modal-title" style="position: absolute;">Xoá</h4>
                </div>
                <div class="modal-body">
                    <label class="control-label">Delete</label>
                    <input class="form-control" style="color: #FF5722;" id="NameChoseShow2" readonly><br>
                </div>
                <div class="modal-footer">
                    <a href="#" onclick="Delete()" style="background: red; padding: 7px;  color: white;">Delete</a>
                </div>
            </div>
        </div>
    </div>
</div>