@model Model.View.FullMeeting

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Theme3.cshtml";
    var listU = (IEnumerable<Model.View.UserView2>)ViewBag.listUser;
    var nguoinhan = new List<SelectListItem>();
    nguoinhan.Add(new SelectListItem
    {
        Text = "Chọn Người Tham Gia",
        Value = "none",
        Selected = true
    });
    foreach (var item in listU)
    {
        nguoinhan.Add(new SelectListItem
        {
            Text = item.FullName,
            Value = item.UserName,
        });
    }

    List<SelectListItem> phonghop = new List<SelectListItem>();
    phonghop.Add(new SelectListItem
         {
             Text = "Phòng họp ONLINE",
             Value = "0",
             Selected = true
         });
    phonghop.Add(new SelectListItem
    {
        Text = "Phòng 1 X1 (tầng trệt)",
        Value = "1",
    });
    phonghop.Add(new SelectListItem
         {
             Text = "Phòng 2 X1 (tầng trệt)",
             Value = "2",

         });
   
    phonghop.Add(new SelectListItem
    {
        Text = "Phòng 3 X1 (mới-tầng trệt)",
        Value = "6",

    });
    phonghop.Add(new SelectListItem
    {
        Text = "Phòng 4 X1 (lầu 2)",
        Value = "5",

    });
    //phonghop.Add(new SelectListItem
    //{
    //    Text = "Phòng họp Xưởng 3",
    //    Value = "3",

    //});
    //phonghop.Add(new SelectListItem
    //{
    //    Text = "Phòng họp Xưởng 2",
    //    Value = "4",

    //});
    List<SelectListItem> vonglap = new List<SelectListItem>();
    vonglap.Add(new SelectListItem
         {
             Text = "không lặp lại",
             Value = "0",
             Selected = true
         });
    vonglap.Add(new SelectListItem
         {
             Text = "lặp lại 1 tuần tiếp theo",
             Value = "1",
         });
    vonglap.Add(new SelectListItem
    {
        Text = "lặp lại 2 tuần tiếp theo",
        Value = "2",
    });
    vonglap.Add(new SelectListItem
    {
        Text = "lặp lại 3 tuần tiếp theo",
        Value = "3",
    });
    vonglap.Add(new SelectListItem
    {
        Text = "lặp lại 4 tuần tiếp theo",
        Value = "4",
    });
    vonglap.Add(new SelectListItem
    {
        Text = "lặp lại 5 tuần tiếp theo",
        Value = "5",
    });
    vonglap.Add(new SelectListItem
    {
        Text = "lặp lại 6 tuần tiếp theo",
        Value = "6",
    });

}
@section jsFooter
{
    <script src="/Scripts/CheckStatusRoomMeeting.js"></script>
<script src="/Scripts/CheckStatusPersonalMeeting.js"></script>
<script src="/Assets/theme3/plugins/timepicker/bootstrap-timepicker.min.js"></script>
<script>
    $(function () {
      
        $('.select2').select2()
        $('.time1').timepicker({
            showInputs: false,
            showMeridian:false
        })
        $('.time2').timepicker({
            showInputs: false,
            showMeridian: false
        })
        $("#date").datepicker();
    })
</script>

<script>
    $(document).ready(function () {
        $('.tiepkhach').click(function () {
            if ($(this).is(':checked')) {
                $(".chude").attr("placeholder", "Quốc Gia nào?");
                $(".chude").attr("style", "background:#FFEB3B");
                $(".chude1").text("Chuẩn Bị Lá Cờ Quốc Gia");
                $(".noidung").attr("placeholder", "Cần chuẩn bị trà, bánh, cơm trưa như thế nào?");
                $(".noidung").attr("style", "background:#FFEB3B");
                $(".noidung1").text("Nội dung cần chuẩn bị đón khách");
            }
            else {
                $(".chude").attr("placeholder", "");
                $(".chude1").text("Chủ đề họp");
                $(".chude").attr("style", "background:#ffffff");
                $(".noidung").attr("placeholder", "");
                $(".noidung").attr("style", "background:#ffffff");
                $(".noidung1").text("Nội dung chi tiết cuộc họp");
            }
        });
        $('.fa-refresh').click(function () {
            var time1 = $(".date").val() + " " + $(".time1").val();
            var time2 = $(".date").val() + " " + $(".time2").val();
            if (time1 >= time2) {
                $(".btn-status2").html("<p style='color:red; font-size:30px;'>Thời gian <b>Từ</b> phải nhỏ hơn thời gian <b>Đến</b></p>");
                $('.nutsave').val("Hãy chọn lại thời gian phù hợp");
                $('.nutsave').attr("type", "not submit");
            }
            else {
                $(".btn-status2").html("<span style='color:green; font-size:20px;'>Thời gian phù hợp</span>");
                $('.nutsave').val("Lưu lại");
                $('.nutsave').attr("type", "submit");
            }
        });

        $('.time1').focusout(function () {
            var time1 = $(".date").val() + " " + $(".time1").val();
            var time2 = $(".date").val() + " " + $(".time2").val();
            if (time1 >= time2) {
                $(".btn-status2").html("<p style='color:red; font-size:30px;'>Thời gian <b>Từ</b> phải nhỏ hơn thời gian <b>Đến</b></p>");
                $('.nutsave').val("Hãy chọn lại thời gian phù hợp");
                $('.nutsave').attr("type", "not submit");
            }
            else {
                $(".btn-status2").html("<span style='color:green; font-size:20px;'>Thời gian phù hợp</span>");
                $('.nutsave').val("Lưu lại");
                $('.nutsave').attr("type", "submit");
            }
        });
        $('.time2').focusout(function () {
            var time1 = $(".date").val() + " " + $(".time1").val();
            var time2 = $(".date").val() + " " + $(".time2").val();
            if (time1 >= time2) {
                $(".btn-status2").html("<p style='color:red; font-size:30px;'>Thời gian <b>Từ</b> phải nhỏ hơn thời gian <b>Đến</b></p>");
                $('.nutsave').val("Hãy chọn lại thời gian phù hợp");
                $('.nutsave').attr("type", "not submit");
            }
            else {
                $(".btn-status2").html("<span style='color:green; font-size:20px;'>Thời gian phù hợp</span>");
                $('.nutsave').val("Lưu lại");
                $('.nutsave').attr("type", "submit");
            }
        });
        $('.phonghop').on('change', function () {
            if ($(this).find(":selected").val() == "1")
            { $("#wellcome").text("Màn hình WELCOME (cú pháp: Tên Cty , Tên các vị khách)"); $("#item_CustomerName").attr("placeholder", "Ví dụ: TOYOTA VIETNAM , Mr Tuan - Mr Thanh - Ms Hoa"); $(".tivi").show(); }
            else
            {
                if ($(this).find(":selected").val() == "0")
                { $("#wellcome").text("Link tham gia phòng họp ONLINE"); $("#item_CustomerName").attr("placeholder", "https://teams.live.com/meet/0123456789"); $(".tivi").show(); }
                else
                {
                    $(".tivi").hide();
                }
               
            }
        });
        //$(".nutsave").click(function () {
        //    alert("Bấm OK và Hãy chờ tí để hệ thống gửi mail cho các thành viên trong cuộc họp nhé !");
        //});


    });
</script>

}
<script src="~/Scripts/jquery-3.4.1.min.js"></script>
<link href="~/Assets/js/jquery-ui.css" rel="stylesheet" />

<div class="card card-primary">
    <div class="card-header">
        <h3 class="card-title">Đặt Phòng Họp</h3>
    </div>
    @using (Html.BeginForm("Create", "Meeting", FormMethod.Post))
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="card-body">
            
           
                <div class="row">
                    <div class='col-md-3'>
                        <label class="control-label">Phòng Họp</label>
                        @Html.DropDownListFor(model => model.item.IDRoom, phonghop, new { @class = "phonghop form-control", })
                        @Html.ValidationMessageFor(model => model.item.IDRoom, "", new { @class = "text-danger" })
                    </div>
                    <div class='col-md-3'>
                       <label>Ngày họp:</label>
                        <div class="input-group mb-3">
                            @*<input type="text" id="date" class="form-control">*@
                            @Html.TextBoxFor(model => model.date, new { @class = "date form-control", @autocomplete = "off" })
                            <div class=" input-group-append">
                                <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                            </div>
                        </div>
                        </div>
                    <div class='col-md-2'>
                        <div class="bootstrap-timepicker">
                            <div class="form-group">
                                <label>Từ:</label>
                                <div class="input-group">
                                    @Html.TextBoxFor(model => model.time1, new { @class = "time1 form-control", @autocomplete = "off" })
                                    <div class="input-group-append">
                                        <span class="input-group-text"><i class="fa fa-clock-o"></i></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class='col-md-2'>
                        <div class="bootstrap-timepicker">
                            <div class="form-group">
                                <label>Đến:</label>
                                <div class="input-group">
                                    @Html.TextBoxFor(model => model.time2, new { @class = "time2 form-control", @autocomplete = "off" })
                                    <div class="input-group-append">
                                        <span class="input-group-text"><i class="fa fa-clock-o"></i></span>
                                    </div>
                                    <span class="fa fa-refresh" style="font-size: 40px; color: green; padding-left: 10px;"></span>
                                </div>

                               
                            </div>
                        </div>                       
                    </div>
                    <div class='col-md-2'>
                        <label class="control-label">Lặp định kỳ</label>
                        @Html.DropDownListFor(model => model.tuanlap, vonglap, new { @class = "form-control", })
                        @Html.ValidationMessageFor(model => model.tuanlap, "", new { @class = "text-danger" })
                    </div>
                </div>            
                <div class="row">
                    <p class="btn-status"></p>
                    <p class="btn-status2"></p>
                </div>
                <div class="row">
                    <div class='col-md-6 tivi'>
                        <label class="control-label" id="wellcome">Link tham gia phòng họp ONLINE</label>
                        @Html.TextBoxFor(model => model.item.CustomerName, new { @class = "form-control", @placeholder = "https://teams.live.com/meet/0123456789" })
                    </div>
                    <div class='col-md-6'>
                        <div class="form-group">
                            <center> <label class="control-label" style="color:red;">Cần chuẩn bị tiếp khách?</label></center> 
                            @Html.CheckBoxFor(model => model.item.Cared, new { @class = "tiepkhach form-control",@style="height:40px" })                       
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class='col-md-12'>
                        <label class="control-label chude1">Chủ đề họp</label>
                        @Html.TextBoxFor(model => model.item.Reason, new { @class = "chude form-control", @placeholder = "điền vào chủ đề cuộc họp" })
                        @Html.ValidationMessageFor(model => model.item.Reason, "", new { @class = "text-danger" })
                    </div>
                </div>
                <div class="row">
                    <div class='col-md-12'>
                        <label class="control-label noidung1">Nội dung họp</label>
                        @Html.TextAreaFor(model => model.item.Details, new { @class = "noidung form-control", @rows = "7", @placeholder = "điền vào nội dung chi tiết cuộc họp" })
                        @Html.ValidationMessageFor(model => model.item.Details, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="row" style="padding-top:20px;">
                    <table class="table table-striped table-bordered table-hover" id="gvCustomers">
                        <thead>
                 
                        </thead>
                        <tbody>
                            <tr id="row_0" class="clonedInput">
                                <td> @Html.DropDownListFor(model => model.detail[0].Username, nguoinhan, new { @class = "form-control select2 select00", @style = "width: 80%;" })<span class="perStatus00"></span></td>
                                <td> @Html.DropDownListFor(model => model.detail[1].Username, nguoinhan, new { @class = "form-control select2 select01", @style = "width: 80%;" })<span class="perStatus01"></span></td>
                            </tr>
                            <tr id="row_0" class="clonedInput">
                                <td> @Html.DropDownListFor(model => model.detail[2].Username, nguoinhan, new { @class = "form-control select2 select02", @style = "width: 80%;" })<span class="perStatus02"></span></td>
                                <td> @Html.DropDownListFor(model => model.detail[3].Username, nguoinhan, new { @class = "form-control select2 select03", @style = "width: 80%;" })<span class="perStatus03"></span></td>
                            </tr>
                            <tr id="row_0" class="clonedInput">
                                <td> @Html.DropDownListFor(model => model.detail[4].Username, nguoinhan, new { @class = "form-control select2 select04", @style = "width: 80%;" })<span class="perStatus04"></span></td>
                                <td> @Html.DropDownListFor(model => model.detail[5].Username, nguoinhan, new { @class = "form-control select2 select05", @style = "width: 80%;" })<span class="perStatus05"></span></td>
                            </tr>
                            <tr id="row_0" class="clonedInput">
                                <td> @Html.DropDownListFor(model => model.detail[6].Username, nguoinhan, new { @class = "form-control select2 select06", @style = "width: 80%;" })<span class="perStatus06"></span></td>
                                <td> @Html.DropDownListFor(model => model.detail[7].Username, nguoinhan, new { @class = "form-control select2 select07", @style = "width: 80%;" })<span class="perStatus07"></span></td>
                            </tr>
                            <tr id="row_0" class="clonedInput">
                                <td> @Html.DropDownListFor(model => model.detail[8].Username, nguoinhan, new { @class = "form-control select2 select08", @style = "width: 80%;" })<span class="perStatus08"></span></td>
                                <td> @Html.DropDownListFor(model => model.detail[9].Username, nguoinhan, new { @class = "form-control select2 select09", @style = "width: 80%;" })<span class="perStatus09"></span></td>
                            </tr>
                            <tr id="row_0" class="clonedInput">
                                <td> @Html.DropDownListFor(model => model.detail[10].Username, nguoinhan, new { @class = "form-control select2 select10", @style = "width: 80%;" })<span class="perStatus10"></span></td>
                                <td> @Html.DropDownListFor(model => model.detail[11].Username, nguoinhan, new { @class = "form-control select2 select11", @style = "width: 80%;" })<span class="perStatus11"></span></td>
                            </tr>
                            <tr id="row_0" class="clonedInput">
                                <td> @Html.DropDownListFor(model => model.detail[12].Username, nguoinhan, new { @class = "form-control select2 select12", @style = "width: 80%;" })<span class="perStatus12"></span></td>
                                <td> @Html.DropDownListFor(model => model.detail[13].Username, nguoinhan, new { @class = "form-control select2 select13", @style = "width: 80%;" })<span class="perStatus13"></span></td>
                            </tr>
                            <tr id="row_0" class="clonedInput">
                                <td> @Html.DropDownListFor(model => model.detail[14].Username, nguoinhan, new { @class = "form-control select2 select14", @style = "width: 80%;" })<span class="perStatus14"></span></td>
                                <td> @Html.DropDownListFor(model => model.detail[15].Username, nguoinhan, new { @class = "form-control select2 select15", @style = "width: 80%;" })<span class="perStatus15"></span></td>
                            </tr>
                            <tr id="row_0" class="clonedInput">
                                <td> @Html.DropDownListFor(model => model.detail[16].Username, nguoinhan, new { @class = "form-control select2 select16", @style = "width: 80%;" })<span class="perStatus16"></span></td>
                                <td> @Html.DropDownListFor(model => model.detail[17].Username, nguoinhan, new { @class = "form-control select2 select17", @style = "width: 80%;" })<span class="perStatus17"></span></td>
                            </tr>
                            <tr id="row_0" class="clonedInput">
                                <td> @Html.DropDownListFor(model => model.detail[18].Username, nguoinhan, new { @class = "form-control select2 select18", @style = "width: 80%;" })<span class="perStatus18"></span></td>
                                <td> @Html.DropDownListFor(model => model.detail[19].Username, nguoinhan, new { @class = "form-control select2 select19", @style = "width: 80%;" })<span class="perStatus19"></span></td>
                            </tr>
                            
                        </tbody>
                    </table>
                </div>

        </div>
        <div class="card-footer">
            <button type="submit" class="nutsave btn btn-primary" onclick="openNav()">Lưu thông tin</button>
        </div>
    }
</div>






